{"version":3,"file":"fileup.min.js","sources":["fileup.min.js"],"sourcesContent":["(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n  typeof define === 'function' && define.amd ? define(factory) :\n  (global = typeof globalThis !== 'undefined' ? globalThis : global || self, global.fileUp = factory());\n})(this, (function () { 'use strict';\n\n  function _typeof(o) {\n    \"@babel/helpers - typeof\";\n\n    return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) {\n      return typeof o;\n    } : function (o) {\n      return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o;\n    }, _typeof(o);\n  }\n\n  var fileUpUtils = {\n    /**\r\n     * Проверка на объект\r\n     * @param value\r\n     */\n    isObject: function isObject(value) {\n      return _typeof(value) === 'object' && !Array.isArray(value) && value !== null;\n    },\n    /**\r\n     * Проверка на число\r\n     * @param num\r\n     * @returns {boolean}\r\n     * @private\r\n     */\n    isNumeric: function isNumeric(num) {\n      return (typeof num === 'number' || typeof num === \"string\" && num.trim() !== '') && !isNaN(num);\n    },\n    /**\r\n     * Получение размера файла в байтах\r\n     * @param {File} file\r\n     * @return {int|null}\r\n     */\n    getFileSize: function getFileSize(file) {\n      if (!(file instanceof File)) {\n        return null;\n      }\n      return file.size || file.fileSize;\n    },\n    /**\r\n     * Получение названия файла\r\n     * @param {File} file\r\n     * @return {string|null}\r\n     */\n    getFileName: function getFileName(file) {\n      if (!(file instanceof File)) {\n        return null;\n      }\n      return file.name || file.fileName;\n    },\n    /**\r\n     * Formatting size\r\n     * @param {int} size\r\n     * @returns {string}\r\n     */\n    getSizeHuman: function getSizeHuman(size) {\n      if (!fileUpUtils.isNumeric(size)) {\n        return '';\n      }\n      size = Number(size);\n      var result = '';\n      if (size >= 1073741824) {\n        result = (size / 1073741824).toFixed(2) + ' Gb';\n      } else if (size >= 1048576) {\n        result = (size / 1048576).toFixed(2) + ' Mb';\n      } else if (size >= 1024) {\n        result = (size / 1024).toFixed(2) + ' Kb';\n      } else if (size >= 0) {\n        result = size + ' bytes';\n      }\n      return result;\n    },\n    /**\r\n     * Создание уникальной строки хэша\r\n     * @returns {string}\r\n     * @private\r\n     */\n    hashCode: function hashCode() {\n      return this.crc32((new Date().getTime() + Math.random()).toString()).toString(16);\n    },\n    /**\r\n     * Hash crc32\r\n     * @param str\r\n     * @returns {number}\r\n     * @private\r\n     */\n    crc32: function crc32(str) {\n      for (var a, o = [], c = 0; c < 256; c++) {\n        a = c;\n        for (var f = 0; f < 8; f++) {\n          a = 1 & a ? 3988292384 ^ a >>> 1 : a >>> 1;\n        }\n        o[c] = a;\n      }\n      for (var n = -1, t = 0; t < str.length; t++) {\n        n = n >>> 8 ^ o[255 & (n ^ str.charCodeAt(t))];\n      }\n      return (-1 ^ n) >>> 0;\n    }\n  };\n\n  var fileUpFile = {\n    _options: {\n      id: null,\n      name: null,\n      type: null,\n      size: null,\n      status: null,\n      urlPreview: null,\n      urlDownload: null\n    },\n    _id: '',\n    _status: 'stand_by',\n    _fileElement: null,\n    _fileData: null,\n    _fileUp: null,\n    _xhr: null,\n    /**\r\n     * Инициализация\r\n     * @param {object} fileUp\r\n     * @param {object} options\r\n     * @param {File}   fileData\r\n     * @private\r\n     */\n    _init: function _init(fileUp, options, fileData) {\n      if (!fileUpUtils.isObject(options)) {\n        throw new Error('File incorrect options param');\n      }\n      if (typeof options.id !== 'number' || options.id < 0) {\n        throw new Error('File dont set or incorrect id param');\n      }\n      if (typeof options.name !== 'string' || !options.name) {\n        throw new Error('File dont set name param');\n      }\n      this._fileUp = fileUp;\n      this._options = $.extend(true, {}, this._options, options);\n      this._id = this._options.id;\n      this._status = typeof this._options.status === 'string' && this._options.status ? this._options.status : 'stand_by';\n      if (fileData instanceof File) {\n        var xhr = null;\n        if (window.XMLHttpRequest) {\n          xhr = \"onload\" in new XMLHttpRequest() ? new XMLHttpRequest() : new XDomainRequest();\n        } else if (window.ActiveXObject) {\n          try {\n            xhr = new ActiveXObject(\"Msxml2.XMLHTTP\");\n          } catch (e) {\n            try {\n              xhr = new ActiveXObject(\"Microsoft.XMLHTTP\");\n            } catch (e) {\n              fileUpPrivate.trigger(fileUp, 'error', ['old_browser', {\n                file: this\n              }]);\n            }\n          }\n        } else {\n          fileUpPrivate.trigger(fileUp, 'error', ['old_browser', {\n            file: this\n          }]);\n        }\n        if (!xhr) {\n          throw new Error('xhr dont created. Check your browser');\n        }\n        this._xhr = xhr;\n        this._fileData = fileData;\n      } else {\n        this._status = 'finish';\n      }\n    },\n    /**\r\n     * Получение id файла\r\n     * @return {null}\r\n     */\n    getId: function getId() {\n      return this._id;\n    },\n    /**\r\n     * Получение name\r\n     * @return {string|null}\r\n     */\n    getName: function getName() {\n      return this._fileData ? fileUpUtils.getFileName(this._fileData) : this._options.name;\n    },\n    /**\r\n     * Получение элемента файла\r\n     * @return {jQuery|null}\r\n     */\n    getElement: function getElement() {\n      return this._fileElement;\n    },\n    /**\r\n     * Получение urlPreview\r\n     * @return {string|null}\r\n     */\n    getUrlPreview: function getUrlPreview() {\n      return this._options.urlPreview;\n    },\n    /**\r\n     * Получение urlDownload\r\n     * @return {string|null}\r\n     */\n    getUrlDownload: function getUrlDownload() {\n      return this._options.urlDownload;\n    },\n    /**\r\n     * Получение size\r\n     * @return {int|null}\r\n     */\n    getSize: function getSize() {\n      return this._fileData ? fileUpUtils.getFileSize(this._fileData) : this._options.size;\n    },\n    /**\r\n     * Formatting size\r\n     * @returns {string}\r\n     */\n    getSizeHuman: function getSizeHuman() {\n      var size = this.getSize();\n      return fileUpUtils.getSizeHuman(size);\n    },\n    /**\r\n     * Получение xhr\r\n     * @return {XMLHttpRequest|null}\r\n     */\n    getXhr: function getXhr() {\n      return this._xhr;\n    },\n    /**\r\n     * Получение файла\r\n     * @return {File|null}\r\n     */\n    getFileData: function getFileData() {\n      if (!(this._fileData instanceof File)) {\n        return null;\n      }\n      return this._fileData;\n    },\n    /**\r\n     * Получение статуса\r\n     * @return {string}\r\n     */\n    getStatus: function getStatus() {\n      return this._status;\n    },\n    /**\r\n     * Установка статуса\r\n     * @param {string} status\r\n     */\n    setStatus: function setStatus(status) {\n      if (typeof status !== 'string') {\n        return;\n      }\n      this._status = status;\n    },\n    /**\r\n     * Удаление файла на странице и из памяти\r\n     */\n    remove: function remove() {\n      this.abort();\n      if (this._fileElement) {\n        this._fileElement.fadeOut('fast', function () {\n          this.remove();\n        });\n      }\n      var fileId = this.getId();\n      if (this._fileUp._files.hasOwnProperty(fileId)) {\n        delete this._fileUp._files[fileId];\n      }\n      fileUpPrivate.trigger(this._fileUp, 'remove', [this]);\n    },\n    /**\r\n     * Загрузка файла\r\n     * @return {boolean}\r\n     */\n    upload: function upload() {\n      var fileData = this.getFileData();\n      var xhr = this.getXhr();\n      if (!fileData || !xhr) {\n        return false;\n      }\n      var options = this._fileUp.getOptions();\n      var that = this;\n      if (typeof options.timeout === 'number') {\n        xhr.timeout = options.timeout;\n      }\n\n      // запрос начат\n      xhr.onloadstart = function () {\n        that.setStatus('load_start');\n        fileUpPrivate.trigger(that._fileUp, 'load_start', [that]);\n      };\n\n      // браузер получил очередной пакет данных\n      xhr.upload.onprogress = function (ProgressEvent) {\n        fileUpPrivate.trigger(that._fileUp, 'load_progress', [that, ProgressEvent]);\n      };\n\n      // запрос был успешно (без ошибок) завершён\n      xhr.onload = function () {\n        that.setStatus('loaded');\n        if (xhr.status === 200) {\n          fileUpPrivate.trigger(that._fileUp, 'load_success', [that, xhr.responseText]);\n        } else {\n          fileUpPrivate.trigger(that._fileUp, 'error', ['load_bad_status', {\n            file: that,\n            fileData: fileData,\n            response: xhr.responseText,\n            xhr: xhr\n          }]);\n        }\n      };\n\n      // запрос был завершён (успешно или неуспешно)\n      xhr.onloadend = function () {\n        that.setStatus('finish');\n        fileUpPrivate.trigger(that._fileUp, 'load_finish', [that]);\n      };\n\n      // запрос был отменён вызовом xhr.abort()\n      xhr.onabort = function () {\n        that.setStatus('stand_by');\n        fileUpPrivate.trigger(that._fileUp, 'load_abort', [that]);\n      };\n\n      // запрос был прекращён по таймауту\n      xhr.ontimeout = function () {\n        that.setStatus('stand_by');\n        fileUpPrivate.trigger(that._fileUp, 'error', ['load_timeout', {\n          file: that,\n          fileData: fileData\n        }]);\n      };\n\n      // произошла ошибка\n      xhr.onerror = function (event) {\n        that.setStatus('stand_by');\n        fileUpPrivate.trigger(that._fileUp, 'error', ['load_error', {\n          file: that,\n          fileData: fileData,\n          event: event\n        }]);\n      };\n      xhr.open(options.httpMethod || 'post', options.url, true);\n      xhr.setRequestHeader('Cache-Control', 'no-cache');\n      xhr.setRequestHeader('X-Requested-With', 'XMLHttpRequest');\n      fileUpPrivate.trigger(that._fileUp, 'load_before_start', [that, xhr]);\n      if (window.FormData !== undefined) {\n        var formData = new FormData();\n        formData.append(options.fieldName, fileData);\n        if (Object.keys(options.extraFields).length) {\n          $.each(options.extraFields, function (name, value) {\n            formData.append(name, value);\n          });\n        }\n        return xhr.send(formData);\n      } else {\n        // IE 8,9\n        return xhr.send(fileData);\n      }\n    },\n    /**\r\n     * Отмена загрузки\r\n     */\n    abort: function abort() {\n      if (this._xhr) {\n        this._xhr.abort();\n      }\n    },\n    /**\r\n     * Рендер элемента\r\n     * @param {string} tpl\r\n     * @return {string|null}\r\n     */\n    render: function render(tpl) {\n      if (!tpl || typeof tpl !== 'string') {\n        return null;\n      }\n      var lang = this._fileUp.getLang();\n      var options = this._fileUp.getOptions();\n      var that = this;\n      var isNoPreview = false;\n      var mimeTypes = fileUpUtils.isObject(options.mimeTypes) ? options.mimeTypes : {};\n      var iconDefault = typeof options.iconDefault === 'string' ? options.iconDefault : '';\n      var size = this.getSizeHuman();\n      var icon = null;\n      var fileType = null;\n      var fileExt = null;\n      tpl = tpl.replace(/\\[ID\\]/g, this.getId());\n      tpl = tpl.replace(/\\[NAME\\]/g, this.getName());\n      tpl = tpl.replace(/\\[SIZE\\]/g, size);\n      tpl = tpl.replace(/\\[UPLOAD\\]/g, lang.upload);\n      tpl = tpl.replace(/\\[REMOVE\\]/g, lang.remove);\n      tpl = tpl.replace(/\\[ABORT\\]/g, lang.abort);\n      if (this._fileData && this._fileData instanceof File) {\n        if (this._fileData.type && typeof this._fileData.type === 'string' && this._fileData.type.match(/^image\\/.*/)) {\n          if (typeof FileReader !== 'undefined') {\n            var reader = new FileReader();\n            reader.onload = function (ProgressEvent) {\n              if (that._fileElement) {\n                var preview = that._fileElement.find('.fileup-preview');\n                preview.removeClass('no-preview').find('img').attr('src', ProgressEvent.target.result);\n              }\n            };\n            reader.readAsDataURL(this._fileData);\n          }\n          isNoPreview = true;\n          tpl = tpl.replace(/\\[PREVIEW_SRC\\]/g, '');\n          tpl = tpl.replace(/\\[TYPE\\]/g, 'fileup-image fileup-no-preview');\n        } else {\n          tpl = tpl.replace(/\\[PREVIEW_SRC\\]/g, '');\n          tpl = tpl.replace(/\\[TYPE\\]/g, 'fileup-doc');\n          fileType = this._fileData.type;\n          fileExt = this.getName().split('.').pop();\n        }\n      } else {\n        var urlPreview = this.getUrlPreview();\n        tpl = tpl.replace(/\\[PREVIEW_SRC\\]/g, urlPreview ? urlPreview : '');\n        tpl = tpl.replace(/\\[TYPE\\]/g, urlPreview ? 'fileup-image' : 'fileup-doc');\n        fileExt = this.getName() ? this.getName().split('.').pop() : '';\n      }\n      this._fileElement = $(tpl);\n      if (isNoPreview) {\n        this._fileElement.find('.fileup-preview').addClass('no-preview');\n      }\n      if (!size) {\n        this._fileElement.find('.fileup-size').hide();\n      }\n      if (fileType || fileExt) {\n        $.each(mimeTypes, function (name, type) {\n          if (!fileUpUtils.isObject(type) || !type.hasOwnProperty('icon') || typeof type.icon !== 'string' || type.icon === '') {\n            return;\n          }\n          if (fileType && type.hasOwnProperty('mime')) {\n            if (typeof type.mime === 'string') {\n              if (type.mime === fileType) {\n                icon = type.icon;\n                return false;\n              }\n            } else if (Array.isArray(type.mime)) {\n              $.each(type.mime, function (key, mime) {\n                if (typeof mime === 'string' && mime === fileType) {\n                  icon = type.icon;\n                  return false;\n                }\n              });\n              if (icon) {\n                return false;\n              }\n            } else if (type.mime instanceof RegExp) {\n              if (type.mime.test(fileType)) {\n                icon = type.icon;\n                return false;\n              }\n            }\n          }\n          if (fileExt && type.hasOwnProperty('ext') && Array.isArray(type.ext)) {\n            $.each(type.ext, function (key, ext) {\n              if (typeof ext === 'string' && ext === fileExt) {\n                icon = type.icon;\n                return false;\n              }\n            });\n            if (icon) {\n              return false;\n            }\n          }\n        });\n      }\n      if (!icon) {\n        icon = iconDefault;\n      }\n      this._fileElement.find('.fileup-icon').addClass(icon);\n      if (this.getUrlDownload()) {\n        var $name = this._fileElement.find('.fileup-name');\n        if ($name[0]) {\n          $name.replaceWith('<a href=\"' + this.getUrlDownload() + '\" class=\"fileup-name\" download=\"' + this.getName() + '\">' + this.getName() + '</a>');\n        }\n      }\n      if (this._status === 'finish') {\n        this._fileElement.find('.fileup-upload').hide();\n        this._fileElement.find('.fileup-abort').hide();\n        this._fileElement.find('.fileup-progress').hide();\n      } else {\n        this._fileElement.find('.fileup-upload').click(function () {\n          that.upload();\n        });\n        this._fileElement.find('.fileup-abort').click(function () {\n          that.abort();\n        });\n      }\n      this._fileElement.find('.fileup-remove').click(function () {\n        that.remove();\n      });\n      return this._fileElement;\n    }\n  };\n\n  var fileUpEvents = {\n    /**\r\n     * Событие начала загрузки\r\n     * @param {object} file\r\n     */\n    onLoadStart: function onLoadStart(file) {\n      var $file = file.getElement();\n      if ($file) {\n        $file.find('.fileup-upload').hide();\n        $file.find('.fileup-abort').show();\n        $file.find('.fileup-result').removeClass('fileup-error').removeClass('fileup-success').text('');\n      }\n    },\n    /**\r\n     * Событие начала изменения прогресса загрузки\r\n     * @param {object}        file\r\n     * @param {ProgressEvent} ProgressEvent\r\n     */\n    onLoadProgress: function onLoadProgress(file, ProgressEvent) {\n      if (ProgressEvent.lengthComputable) {\n        var percent = Math.ceil(ProgressEvent.loaded / ProgressEvent.total * 100);\n        var $file = file.getElement();\n        if ($file) {\n          $file.find('.fileup-progress-bar').css('width', percent + \"%\");\n        }\n      }\n    },\n    /**\r\n     * Событие начала загрузки\r\n     * @param {object} file\r\n     */\n    onLoadAbort: function onLoadAbort(file) {\n      var $file = file.getElement();\n      if ($file) {\n        $file.find('.fileup-abort').hide();\n        $file.find('.fileup-upload').show();\n        $file.find('.fileup-result').removeClass('fileup-error').removeClass('fileup-success').text('');\n      }\n    },\n    /**\r\n     * Событие успешной загрузки файла\r\n     * @param {object} file\r\n     */\n    onSuccess: function onSuccess(file) {\n      var $file = file.getElement();\n      if ($file) {\n        var lang = this.getLang();\n        $file.find('.fileup-abort').hide();\n        $file.find('.fileup-upload').hide();\n        $file.find('.fileup-result').removeClass('fileup-error').addClass('fileup-success').text(lang.complete);\n      }\n    },\n    /**\r\n     * Событие ошибки\r\n     * @param {string} eventName\r\n     * @param {object} options\r\n     */\n    onError: function onError(eventName, options) {\n      var lang = this.getLang();\n      switch (eventName) {\n        case 'files_limit':\n          alert(lang.errorFilesLimit.replace(/%filesLimit%/g, options.filesLimit));\n          break;\n        case 'size_limit':\n          var size = fileUpUtils.getSizeHuman(options.sizeLimit);\n          var message = lang.errorSizeLimit;\n          message = message.replace(/%sizeLimit%/g, size);\n          message = message.replace(/%fileName%/g, fileUpUtils.getFileName(options.fileData));\n          alert(message);\n          break;\n        case 'file_type':\n          alert(lang.errorFileType.replace(/%fileName%/g, fileUpUtils.getFileName(options.fileData)));\n          break;\n        case 'load_bad_status':\n        case 'load_error':\n        case 'load_timeout':\n          var $file = options.file.getElement();\n          if ($file) {\n            var _message = eventName === 'load_bad_status' ? lang.errorBadStatus : lang.errorLoad;\n            $file.find('.fileup-abort').hide();\n            $file.find('.fileup-upload').show();\n            $file.find('.fileup-result').addClass('fileup-error').text(_message);\n          }\n          break;\n        case 'old_browser':\n          alert(lang.errorOldBrowser);\n          break;\n      }\n    },\n    /**\r\n     * Событие переноса файла через dropzone\r\n     * @param {Event} event\r\n     */\n    onDragOver: function onDragOver(event) {\n      event.stopPropagation();\n      event.preventDefault();\n      event.dataTransfer.dropEffect = 'copy';\n      var dropzone = this.getDropzone();\n      if (dropzone) {\n        dropzone.addClass('over');\n      }\n    },\n    /**\r\n     * Событие завершения перетаскивания с отпускаем кнопки мыши\r\n     * @param {Event} event\r\n     */\n    onDragLeave: function onDragLeave(event) {\n      var dropzone = this.getDropzone();\n      if (dropzone) {\n        dropzone.removeClass('over');\n      }\n    },\n    /**\r\n     * Событие когда перетаскиваемый элемент или выделенный текст покидают допустимую цель перетаскивания\r\n     * @param {Event} event\r\n     */\n    onDragEnd: function onDragEnd(event) {\n      var dropzone = this.getDropzone();\n      if (dropzone) {\n        dropzone.removeClass('over');\n      }\n    },\n    /**\r\n     * Событие переноса файла в dropzone\r\n     * @param {Event} event\r\n     */\n    onDragEnter: function onDragEnter(event) {\n      event.stopPropagation();\n      event.preventDefault();\n      event.dataTransfer.dropEffect = 'copy';\n    }\n  };\n\n  var fileUpPrivate = {\n    /**\r\n     *\r\n     * @param {object} fileUp\r\n     */\n    initInput: function initInput(fileUp) {\n      var input = null;\n      if (fileUp._options.input instanceof HTMLElement || fileUp._options.input instanceof jQuery) {\n        input = $(fileUp._options.input);\n      } else if (typeof fileUp._options.input === 'string' && fileUp._options.input) {\n        input = $('#' + fileUp._options.input);\n      }\n      if (!input || !$(input)[0] || $(input)[0].type !== 'file') {\n        throw new Error('Not found input element');\n      }\n      fileUp._input = input;\n    },\n    /**\r\n     *\r\n     * @param {object} fileUp\r\n     */\n    initQueue: function initQueue(fileUp) {\n      var queue = null;\n      if (fileUp._options.queue instanceof HTMLElement || fileUp._options.queue instanceof jQuery) {\n        queue = $(fileUp._options.queue);\n      } else if (typeof fileUp._options.queue === 'string' && fileUp._options.queue) {\n        queue = $('#' + fileUp._options.queue);\n      }\n      if (!queue || !$(queue)[0]) {\n        throw new Error('Not found queue element');\n      }\n      fileUp._queue = queue;\n    },\n    /**\r\n     *\r\n     * @param {object} fileUp\r\n     */\n    initDropzone: function initDropzone(fileUp) {\n      var dropzone = null;\n      if (fileUp._options.dropzone instanceof HTMLElement || fileUp._options.dropzone instanceof jQuery) {\n        dropzone = $(fileUp._options.dropzone);\n      } else if (typeof fileUp._options.dropzone === 'string' && fileUp._options.dropzone) {\n        dropzone = $('#' + fileUp._options.dropzone);\n      }\n      if (dropzone) {\n        fileUp._dropzone = dropzone;\n        var that = this;\n        dropzone.on('click', function () {\n          fileUp.getInput().click();\n        });\n        dropzone[0].addEventListener('dragover', function (event) {\n          that.trigger(fileUp, 'dragOver', [event]);\n        });\n        dropzone[0].addEventListener('dragleave', function (event) {\n          that.trigger(fileUp, 'dragLeave', [event]);\n        });\n        dropzone[0].addEventListener('dragenter', function (event) {\n          that.trigger(fileUp, 'dragEnter', [event]);\n        });\n        dropzone[0].addEventListener('dragend', function (event) {\n          that.trigger(fileUp, 'dragEnd', [event]);\n        });\n        dropzone[0].addEventListener('drop', function (event) {\n          fileUp.getInput()[0].files = event.target.files || event.dataTransfer.files;\n          that.appendFiles(fileUp, event);\n        });\n      }\n    },\n    /**\r\n     * Инициализация событий\r\n     * @param {object} fileUp\r\n     */\n    initEvents: function initEvents(fileUp) {\n      /**\r\n       * @param {string}          name\r\n       * @param {function|string} func\r\n       */\n      function setEvent(name, func) {\n        var event = null;\n        if (typeof func === 'function') {\n          event = func;\n        } else if (typeof func === 'string') {\n          event = new Function(func);\n        }\n        if (event) {\n          fileUp.on(name, event);\n        }\n      }\n      var options = fileUp.getOptions();\n      var that = this;\n      setEvent('load_start', fileUpEvents.onLoadStart);\n      setEvent('load_progress', fileUpEvents.onLoadProgress);\n      setEvent('load_abort', fileUpEvents.onLoadAbort);\n      setEvent('load_success', fileUpEvents.onSuccess);\n      setEvent('error', fileUpEvents.onError);\n      setEvent('dragOver', fileUpEvents.onDragOver);\n      setEvent('dragEnter', fileUpEvents.onDragEnter);\n      setEvent('dragLeave', fileUpEvents.onDragLeave);\n      setEvent('dragEnd', fileUpEvents.onDragEnd);\n      if (options.onSelect) {\n        setEvent('select', options.onSelect);\n      }\n      if (options.onRemove) {\n        setEvent('remove', options.onRemove);\n      }\n      if (options.onBeforeStart) {\n        setEvent('load_before_start', options.onBeforeStart);\n      }\n      if (options.onStart) {\n        setEvent('load_start', options.onStart);\n      }\n      if (options.onProgress) {\n        setEvent('load_progress', options.onProgress);\n      }\n      if (options.onAbort) {\n        setEvent('load_abort', options.onAbort);\n      }\n      if (options.onSuccess) {\n        setEvent('load_success', options.onSuccess);\n      }\n      if (options.onFinish) {\n        setEvent('load_finish', options.onFinish);\n      }\n      if (options.onError) {\n        setEvent('error', options.onError);\n      }\n      if (options.onDragOver) {\n        setEvent('dragOver', options.onDragOver);\n      }\n      if (options.onDragLeave) {\n        setEvent('dragLeave', options.onDragLeave);\n      }\n      if (options.onDragEnd) {\n        setEvent('dragEnd', options.onDragEnd);\n      }\n      if (options.onDragEnter) {\n        setEvent('dragEnter', options.onDragEnter);\n      }\n      fileUp.getInput().on('change', function (event) {\n        that.appendFiles(fileUp, event);\n      });\n    },\n    /**\r\n     * Формирование списка ранее загруженных файлов\r\n     * @param {object} fileUp\r\n     */\n    renderFiles: function renderFiles(fileUp) {\n      var options = fileUp.getOptions();\n      if (Array.isArray(options.files) && options.files.length > 0) {\n        for (var i = 0; i < options.files.length; i++) {\n          if (!fileUpUtils.isObject(options.files[i])) {\n            continue;\n          }\n          options.files[i].id = fileUp._fileIndex;\n          options.files[i].status = 'loaded';\n          this.appendFileByData(fileUp, options.files[i]);\n        }\n      }\n    },\n    /**\r\n     * @param fileUp\r\n     * @param name\r\n     * @param params\r\n     * @return {object}\r\n     * @private\r\n     */\n    trigger: function trigger(fileUp, name, params) {\n      params = params || [];\n      var results = [];\n      if (fileUp._events[name] instanceof Object && fileUp._events[name].length > 0) {\n        for (var i = 0; i < fileUp._events[name].length; i++) {\n          var callback = fileUp._events[name][i].callback;\n          results.push(callback.apply(fileUp._events[name][i].context || fileUp, params));\n          if (fileUp._events[name][i].singleExec) {\n            fileUp._events[name].splice(i, 1);\n            i--;\n          }\n        }\n      }\n      return results;\n    },\n    /**\r\n     * Append files in queue\r\n     * @param {object} fileUp\r\n     * @param {Event}  event\r\n     */\n    appendFiles: function appendFiles(fileUp, event) {\n      var _this = this;\n      event.preventDefault();\n      event.stopPropagation();\n      var options = fileUp.getOptions();\n      var input = fileUp.getInput();\n      var files = input[0].files;\n      var multiple = input.is(\"[multiple]\");\n      if (files.length > 0) {\n        var _loop = function _loop() {\n            var file = files[i];\n            if (options.sizeLimit > 0 && fileUpUtils.getFileSize(file) > options.sizeLimit) {\n              _this.trigger(fileUp, 'error', ['size_limit', {\n                fileData: file,\n                sizeLimit: options.sizeLimit\n              }]);\n              return 0; // continue\n            }\n            if (options.filesLimit > 0 && Object.keys(fileUp._files).length >= options.filesLimit) {\n              _this.trigger(fileUp, 'error', ['files_limit', {\n                fileData: file,\n                filesLimit: options.filesLimit\n              }]);\n              return 1; // break\n            }\n            if (typeof input[0].accept === 'string') {\n              var accept = input[0].accept;\n              if (accept && /[^\\w]+/.test(accept)) {\n                var isAccept = false;\n                var types = accept.split(',');\n                if (types.length > 0) {\n                  for (t = 0; t < types.length; t++) {\n                    types[t] = types[t].replace(/\\s/g, '');\n                    if (new RegExp(types[t].replace('*', '.*')).test(file.type) || new RegExp(types[t].replace('.', '.*/')).test(file.type)) {\n                      isAccept = true;\n                      break;\n                    }\n                  }\n                }\n                if (!isAccept) {\n                  _this.trigger(fileUp, 'error', ['file_type', {\n                    fileData: file\n                  }]);\n                  return 0; // continue\n                }\n              }\n            }\n            var results = _this.trigger(fileUp, 'select', [file]);\n            if (results) {\n              var isContinue = false;\n              $.each(results, function (key, result) {\n                if (result === false) {\n                  isContinue = true;\n                  return false;\n                }\n              });\n              if (isContinue) {\n                return 0; // continue\n              }\n            }\n            if (!multiple) {\n              fileUp.removeAll();\n            }\n            _this.appendFile(fileUp, file);\n            if (!multiple) {\n              return 1; // break\n            }\n          },\n          t,\n          _ret;\n        for (var i = 0; i < files.length; i++) {\n          _ret = _loop();\n          if (_ret === 0) continue;\n          if (_ret === 1) break;\n        }\n        input.val('');\n      }\n      this.trigger(fileUp, 'dragEnd', [event]);\n    },\n    /**\r\n     * Добавление файла в список из объекта File\r\n     * @param {object} fileUp\r\n     * @param {object} file\r\n     */\n    appendFile: function appendFile(fileUp, file) {\n      var options = fileUp.getOptions();\n      var fileInstance = $.extend(true, {}, fileUpFile);\n      var data = {\n        id: fileUp._fileIndex,\n        name: fileUpUtils.getFileName(file),\n        size: fileUpUtils.getFileSize(file),\n        type: file.type\n      };\n      fileInstance._init(fileUp, data, file);\n      fileUp._files[fileUp._fileIndex] = fileInstance;\n      var queue = fileUp.getQueue();\n      if (queue) {\n        queue.append(fileInstance.render(options.templateFile));\n      }\n      fileUp._fileIndex++;\n      if (typeof fileUp._options.autostart === 'boolean' && fileUp._options.autostart) {\n        fileInstance.upload();\n      }\n    },\n    /**\r\n     * Добавление файла в список из данных\r\n     * @param {object} fileUp\r\n     * @param {object} data\r\n     */\n    appendFileByData: function appendFileByData(fileUp, data) {\n      var options = fileUp.getOptions();\n      var fileInstance = $.extend(true, {}, fileUpFile);\n      fileInstance._init(fileUp, data);\n      fileUp._files[fileUp._fileIndex] = fileInstance;\n      var queue = fileUp.getQueue();\n      if (queue) {\n        queue.append(fileInstance.render(options.templateFile));\n      }\n      fileUp._fileIndex++;\n    }\n  };\n\n  var tpl = Object.create(null);\n  tpl['file.html'] = '<div class=\"fileup-file [TYPE] mb-2 p-1 d-flex flex-nowrap gap-2 bg-light border border-secondary-subtle rounded rounded-1\"> <div class=\"fileup-preview\"> <img src=\"[PREVIEW_SRC]\" alt=\"[NAME]\" class=\"border rounded\"/> <i class=\"fileup-icon fs-4 text-secondary\"></i> </div> <div class=\"flex-fill\"> <div class=\"fileup-description\"> <span class=\"fileup-name\">[NAME]</span> <small class=\"fileup-size text-nowrap text-secondary\">([SIZE])</small> </div> <div class=\"fileup-controls mt-1 d-flex gap-2\"> <span class=\"fileup-remove\" title=\"[REMOVE]\">✕</span> <span class=\"fileup-upload link-primary\">[UPLOAD]</span> <span class=\"fileup-abort link-primary\" style=\"display:none\">[ABORT]</span> </div> <div class=\"fileup-result\"></div> <div class=\"fileup-progress progress mt-2 mb-1\"> <div class=\"fileup-progress-bar progress-bar\"></div> </div> </div> </div>';\n\n  var fileUpInstance = {\n    _options: {\n      id: null,\n      url: null,\n      input: null,\n      queue: null,\n      dropzone: null,\n      files: [],\n      fieldName: 'file',\n      extraFields: {},\n      lang: 'en',\n      langItems: null,\n      sizeLimit: 0,\n      filesLimit: 0,\n      httpMethod: 'post',\n      timeout: null,\n      autostart: false,\n      templateFile: null,\n      onSelect: null,\n      onRemove: null,\n      onBeforeStart: null,\n      onStart: null,\n      onProgress: null,\n      onAbort: null,\n      onSuccess: null,\n      onFinish: null,\n      onError: null,\n      onDragOver: null,\n      onDragLeave: null,\n      onDragEnd: null,\n      onDragEnter: null,\n      iconDefault: 'bi bi-file-earmark-text',\n      mimeTypes: {\n        archive: {\n          mime: ['application/zip', 'application/gzip', 'application/x-bzip', 'application/x-bzip2', 'application/x-7z-compressed'],\n          ext: ['zip', '7z', 'bz', 'bz2', 'gz', 'jar', 'rar', 'tar'],\n          icon: 'bi bi-file-earmark-zip'\n        },\n        word: {\n          mime: ['application/msword', 'application/vnd.openxmlformats-officedocument.wordprocessingml.document'],\n          ext: ['doc', 'docx'],\n          icon: 'bi bi-file-earmark-word'\n        },\n        excel: {\n          mime: ['application/vnd.ms-excel', 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet'],\n          ext: ['xls', 'xlsx'],\n          icon: 'bi bi-file-earmark-excel'\n        },\n        video: {\n          mime: /video\\/.*/,\n          ext: ['avi', 'mp4', 'mpeg', 'ogv', 'ts', 'webm', '3gp', '3g2', 'mkv'],\n          icon: 'bi bi-file-earmark-play'\n        },\n        audio: {\n          mime: /audio\\/.*/,\n          ext: ['avi', 'mp4', 'mpeg', 'ogv', 'ts', 'webm', '3gp', '3g2', 'mkv'],\n          icon: 'bi bi-file-earmark-music'\n        },\n        pdf: {\n          mime: ['application/pdf'],\n          ext: ['pdf'],\n          icon: 'bi bi-file-earmark-pdf'\n        },\n        binary: {\n          mime: ['application\\/octet-stream'],\n          ext: ['bin', 'exe', 'dat', 'dll'],\n          icon: 'bi bi-file-earmark-binary'\n        }\n      }\n    },\n    _id: null,\n    _fileIndex: 0,\n    _input: null,\n    _queue: null,\n    _dropzone: null,\n    _files: {},\n    _events: {},\n    /**\r\n     * Инициализация\r\n     * @param {object} options\r\n     * @private\r\n     */\n    _init: function _init(options) {\n      if (typeof options.url !== 'string' || !options.url) {\n        throw new Error('Dont set url param');\n      }\n      this._options = $.extend(true, {}, this._options, options);\n      this._id = typeof this._options.id === 'string' && this._options.id ? this._options.id : fileUpUtils.hashCode();\n      if (!this._options.templateFile || typeof this._options.templateFile !== 'string') {\n        this._options.templateFile = tpl['file.html'];\n      }\n      fileUpPrivate.initInput(this);\n      fileUpPrivate.initQueue(this);\n      fileUpPrivate.initDropzone(this);\n      fileUpPrivate.initEvents(this);\n      fileUpPrivate.renderFiles(this);\n    },\n    /**\r\n     * Получение параметров\r\n     * @returns {object}\r\n     */\n    getOptions: function getOptions() {\n      return this._options;\n    },\n    /**\r\n     * Получение id\r\n     * @return {string|null}\r\n     */\n    getId: function getId() {\n      return this._id;\n    },\n    /**\r\n     * Получение input\r\n     * @return {jQuery|null}\r\n     */\n    getInput: function getInput() {\n      return this._input;\n    },\n    /**\r\n     * Получение queue\r\n     * @return {jQuery|null}\r\n     */\n    getQueue: function getQueue() {\n      return this._queue;\n    },\n    /**\r\n     * Получение dropzone\r\n     * @return {jQuery|null}\r\n     */\n    getDropzone: function getDropzone() {\n      return this._dropzone;\n    },\n    /**\r\n     * Подписка на событие\r\n     * @param {string}           eventName\r\n     * @param {function|string}  callback\r\n     * @param {object|undefined} context\r\n     */\n    on: function on(eventName, callback, context) {\n      if (_typeof(this._events[eventName]) !== 'object') {\n        this._events[eventName] = [];\n      }\n      this._events[eventName].push({\n        context: context || this,\n        callback: callback,\n        singleExec: false\n      });\n    },\n    /**\r\n     * Подписка на событие таким образом, что выполнение произойдет лишь один раз\r\n     * @param {string}           eventName\r\n     * @param {function|string}  callback\r\n     * @param {object|undefined} context\r\n     */\n    one: function one(eventName, callback, context) {\n      if (_typeof(this._events[eventName]) !== 'object') {\n        this._events[eventName] = [];\n      }\n      this._events[eventName].push({\n        context: context || this,\n        callback: callback,\n        singleExec: true\n      });\n    },\n    /**\r\n     * Получение настроек языка\r\n     */\n    getLang: function getLang() {\n      return $.extend(true, {}, this._options.langItems);\n    },\n    /**\r\n     * Получение всех файлов\r\n     * @return {object}\r\n     */\n    getFiles: function getFiles() {\n      return this._files;\n    },\n    /**\r\n     * Получение файла по его id\r\n     * @param {int} fileId\r\n     * @return {object|null}\r\n     */\n    getFileById: function getFileById(fileId) {\n      var result = null;\n      $.each(this._files, function (key, file) {\n        if (fileId === file.getId()) {\n          result = file;\n        }\n      });\n      return result;\n    },\n    /**\r\n     * Удаление всех файлов\r\n     */\n    removeAll: function removeAll() {\n      $.each(this._files, function (key, file) {\n        file.remove();\n      });\n    },\n    /**\r\n     * Загрузка всех файлов\r\n     */\n    uploadAll: function uploadAll() {\n      $.each(this._files, function (key, file) {\n        file.upload();\n      });\n    },\n    /**\r\n     * Отмена загрузки всех файлов\r\n     */\n    abortAll: function abortAll() {\n      $.each(this._files, function (key, file) {\n        file.abort();\n      });\n    }\n  };\n\n  var fileUp = {\n    lang: {},\n    _instances: {},\n    /**\r\n     * Создание экземпляра\r\n     * @param {object} options\r\n     * @returns {object}\r\n     */\n    create: function create(options) {\n      options = fileUpUtils.isObject(options) ? options : {};\n      if (!options.hasOwnProperty('lang')) {\n        options.lang = 'en';\n      }\n      var langList = this.lang.hasOwnProperty(options.lang) ? this.lang[options.lang] : {};\n      options.langItems = options.hasOwnProperty('langItems') && fileUpUtils.isObject(options.langItems) ? $.extend(true, {}, langList, options.langItems) : langList;\n      var instance = $.extend(true, {}, fileUpInstance);\n      instance._init(options);\n      var id = instance.getId();\n      this._instances[id] = instance;\n      return instance;\n    },\n    /**\r\n     * Получение экземпляра по id\r\n     * @param {string} id\r\n     * @returns {object|null}\r\n     */\n    get: function get(id) {\n      if (!this._instances.hasOwnProperty(id)) {\n        return null;\n      }\n      if (!$.contains(document, this._instances[id]._input[0])) {\n        delete this._instances[id];\n        return null;\n      }\n      return this._instances[id];\n    }\n  };\n\n  fileUp.lang.en = {\n    upload: 'Upload',\n    abort: 'Abort',\n    remove: 'Remove',\n    complete: 'Complete',\n    error: 'Error',\n    errorLoad: 'Error uploading file',\n    errorBadStatus: 'Error uploading file. Bad request.',\n    errorFilesLimit: 'The number of selected files exceeds the limit (%filesLimit%)',\n    errorSizeLimit: 'File \"%fileName%\" exceeds the size limit (%sizeLimit%)',\n    errorFileType: 'File \"%fileName%\" is incorrect',\n    errorOldBrowser: 'Your browser can not upload files. Update to the latest version'\n  };\n\n  fileUp.lang.ru = {\n    upload: 'Загрузить',\n    abort: 'Остановить',\n    remove: 'Удалить',\n    complete: 'Готово',\n    error: 'Ошибка',\n    errorLoad: 'Ошибка при загрузке файла',\n    errorBadStatus: 'Ошибка при загрузке файла. Некорректный запрос.',\n    errorFilesLimit: 'Количество выбранных файлов превышает лимит (%filesLimit%)',\n    errorSizeLimit: 'Файл \"%fileName%\" превышает предельный размер (%sizeLimit%)',\n    errorFileType: 'Файл \"%fileName%\" является некорректным',\n    errorOldBrowser: 'Обновите ваш браузер до последней версии'\n  };\n\n  fileUp.lang.es = {\n    upload: 'Subir',\n    abort: 'Cancelar',\n    remove: 'Eliminar',\n    complete: 'Cargado',\n    error: 'Error',\n    errorLoad: 'Error al cargar el archivo',\n    errorBadStatus: 'Error al cargar el archivo. Solicitud no válida.',\n    errorFilesLimit: 'El número de archivo selecccionados excede el límite (%filesLimit%)',\n    errorSizeLimit: 'El archivo \"%fileName%\" excede el limite de tamaño (%sizeLimit%)',\n    errorFileType: 'El archivo \"%fileName%\" es inválido',\n    errorOldBrowser: 'Tu navegador no puede subir archivos. Actualiza a la última versión'\n  };\n\n  fileUp.lang.pt = {\n    upload: 'Enviar',\n    abort: 'Cancelar',\n    remove: 'Remover',\n    complete: 'Enviado',\n    error: 'Erro',\n    errorLoad: 'Erro ao carregar o arquivo',\n    errorBadStatus: 'Erro ao carregar o arquivo. Pedido inválido.',\n    errorFilesLimit: 'O número de arquivos selecionados excede o limite (%filesLimit%)',\n    errorSizeLimit: 'Arquivo \"%fileName%\" excede o limite (%sizeLimit%)',\n    errorFileType: 'Arquivo \"%fileName%\" inválido',\n    errorOldBrowser: 'Seu navegador não pode enviar os arquivos. Atualize para a versão mais recente'\n  };\n\n  return fileUp;\n\n}));\n"],"names":["global","factory","exports","module","define","amd","globalThis","self","fileUp","this","_typeof","o","Symbol","iterator","constructor","prototype","fileUpUtils","isObject","value","Array","isArray","isNumeric","num","trim","isNaN","getFileSize","file","File","size","fileSize","getFileName","name","fileName","getSizeHuman","result","Number","toFixed","hashCode","crc32","Date","getTime","Math","random","toString","str","c","a","f","n","t","length","charCodeAt","fileUpFile","_options","id","type","status","urlPreview","urlDownload","_id","_status","_fileElement","_fileData","_fileUp","_xhr","_init","options","fileData","Error","$","extend","xhr","window","XMLHttpRequest","XDomainRequest","ActiveXObject","e","fileUpPrivate","trigger","getId","getName","getElement","getUrlPreview","getUrlDownload","getSize","getXhr","getFileData","getStatus","setStatus","remove","abort","fadeOut","fileId","_files","hasOwnProperty","upload","that","formData","getOptions","timeout","onloadstart","onprogress","ProgressEvent","onload","responseText","response","onloadend","onabort","ontimeout","onerror","event","open","httpMethod","url","setRequestHeader","undefined","FormData","append","fieldName","Object","keys","extraFields","each","send","render","tpl","isNoPreview","mimeTypes","iconDefault","icon","fileType","fileExt","$name","lang","getLang","replace","match","FileReader","reader","find","removeClass","attr","target","readAsDataURL","split","pop","addClass","hide","mime","key","RegExp","test","ext","replaceWith","click","fileUpEvents","$file","show","text","lengthComputable","percent","ceil","loaded","total","css","complete","eventName","alert","errorFilesLimit","filesLimit","sizeLimit","message","errorSizeLimit","errorFileType","_message","errorBadStatus","errorLoad","errorOldBrowser","stopPropagation","preventDefault","dataTransfer","dropEffect","dropzone","getDropzone","initInput","input","HTMLElement","jQuery","_input","initQueue","queue","_queue","initDropzone","_dropzone","on","getInput","addEventListener","files","appendFiles","initEvents","setEvent","func","Function","onSelect","onRemove","onBeforeStart","onStart","onProgress","onAbort","onSuccess","onFinish","onError","onDragOver","onDragLeave","onDragEnd","onDragEnter","renderFiles","i","_fileIndex","appendFileByData","params","results","_events","callback","push","apply","context","singleExec","splice","_this","multiple","is","_ret","accept","isAccept","types","isContinue","removeAll","appendFile","val","fileInstance","data","getQueue","templateFile","autostart","create","fileUpInstance","langItems","archive","word","excel","video","audio","pdf","binary","one","getFiles","getFileById","uploadAll","abortAll","_instances","langList","instance","get","contains","document","en","error","ru","es","pt"],"mappings":"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"}
{"version":3,"file":"fileup.min.js","sources":["fileup.min.js"],"sourcesContent":["(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n  typeof define === 'function' && define.amd ? define(factory) :\n  (global = typeof globalThis !== 'undefined' ? globalThis : global || self, global.fileUp = factory());\n})(this, (function () { 'use strict';\n\n  function _typeof(o) {\n    \"@babel/helpers - typeof\";\n\n    return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) {\n      return typeof o;\n    } : function (o) {\n      return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o;\n    }, _typeof(o);\n  }\n\n  var fileUpUtils = {\n    /**\r\n     * Проверка на объект\r\n     * @param value\r\n     */\n    isObject: function isObject(value) {\n      return _typeof(value) === 'object' && !Array.isArray(value) && value !== null;\n    },\n    /**\r\n     * Проверка на число\r\n     * @param num\r\n     * @returns {boolean}\r\n     * @private\r\n     */\n    isNumeric: function isNumeric(num) {\n      return (typeof num === 'number' || typeof num === \"string\" && num.trim() !== '') && !isNaN(num);\n    },\n    /**\r\n     * Получение размера файла в байтах\r\n     * @param {File} file\r\n     * @return {int|null}\r\n     */\n    getFileSize: function getFileSize(file) {\n      if (!(file instanceof File)) {\n        return null;\n      }\n      return file.size || file.fileSize;\n    },\n    /**\r\n     * Получение названия файла\r\n     * @param {File} file\r\n     * @return {string|null}\r\n     */\n    getFileName: function getFileName(file) {\n      if (!(file instanceof File)) {\n        return null;\n      }\n      return file.name || file.fileName;\n    },\n    /**\r\n     * Formatting size\r\n     * @param {int} size\r\n     * @returns {string}\r\n     */\n    getSizeHuman: function getSizeHuman(size) {\n      if (!fileUpUtils.isNumeric(size)) {\n        return '';\n      }\n      size = Number(size);\n      var result = '';\n      if (size >= 1073741824) {\n        result = (size / 1073741824).toFixed(2) + ' Gb';\n      } else if (size >= 1048576) {\n        result = (size / 1048576).toFixed(2) + ' Mb';\n      } else if (size >= 1024) {\n        result = (size / 1024).toFixed(2) + ' Kb';\n      } else if (size >= 0) {\n        result = size + ' bytes';\n      }\n      return result;\n    },\n    /**\r\n     * Создание уникальной строки хэша\r\n     * @returns {string}\r\n     * @private\r\n     */\n    hashCode: function hashCode() {\n      return this.crc32((new Date().getTime() + Math.random()).toString()).toString(16);\n    },\n    /**\r\n     * Hash crc32\r\n     * @param str\r\n     * @returns {number}\r\n     * @private\r\n     */\n    crc32: function crc32(str) {\n      for (var a, o = [], c = 0; c < 256; c++) {\n        a = c;\n        for (var f = 0; f < 8; f++) {\n          a = 1 & a ? 3988292384 ^ a >>> 1 : a >>> 1;\n        }\n        o[c] = a;\n      }\n      for (var n = -1, t = 0; t < str.length; t++) {\n        n = n >>> 8 ^ o[255 & (n ^ str.charCodeAt(t))];\n      }\n      return (-1 ^ n) >>> 0;\n    }\n  };\n\n  var fileUpEvents = {\n    /**\r\n     * Событие начала загрузки\r\n     * @param {object} file\r\n     */\n    onLoadStart: function onLoadStart(file) {\n      var $file = file.getElement();\n      if ($file) {\n        $file.find('.fileup-upload').hide();\n        $file.find('.fileup-abort').show();\n        $file.find('.fileup-result').removeClass('fileup-error').removeClass('fileup-success').text('');\n      }\n    },\n    /**\r\n     * Событие начала изменения прогресса загрузки\r\n     * @param {object}        file\r\n     * @param {ProgressEvent} ProgressEvent\r\n     */\n    onLoadProgress: function onLoadProgress(file, ProgressEvent) {\n      if (ProgressEvent.lengthComputable) {\n        var percent = Math.ceil(ProgressEvent.loaded / ProgressEvent.total * 100);\n        var $file = file.getElement();\n        if ($file) {\n          $file.find('.fileup-progress-bar').css('width', percent + \"%\");\n        }\n      }\n    },\n    /**\r\n     * Событие начала загрузки\r\n     * @param {object} file\r\n     */\n    onLoadAbort: function onLoadAbort(file) {\n      var $file = file.getElement();\n      if ($file) {\n        $file.find('.fileup-abort').hide();\n        $file.find('.fileup-upload').show();\n        $file.find('.fileup-result').removeClass('fileup-error').removeClass('fileup-success').text('');\n      }\n    },\n    /**\r\n     * Событие успешной загрузки файла\r\n     * @param {object} file\r\n     */\n    onSuccess: function onSuccess(file) {\n      var $file = file.getElement();\n      if ($file) {\n        var lang = this.getLang();\n        $file.find('.fileup-abort').hide();\n        $file.find('.fileup-upload').hide();\n        $file.find('.fileup-result').removeClass('fileup-error').addClass('fileup-success').text(lang.complete);\n      }\n    },\n    /**\r\n     * Событие ошибки\r\n     * @param {string} eventName\r\n     * @param {object} options\r\n     */\n    onError: function onError(eventName, options) {\n      var lang = this.getLang();\n      switch (eventName) {\n        case 'files_limit':\n          alert(lang.errorFilesLimit.replace(/%filesLimit%/g, options.filesLimit));\n          break;\n        case 'size_limit':\n          var size = fileUpUtils.getSizeHuman(options.sizeLimit);\n          var message = lang.errorSizeLimit;\n          message = message.replace(/%sizeLimit%/g, size);\n          message = message.replace(/%fileName%/g, fileUpUtils.getFileName(options.fileData));\n          alert(message);\n          break;\n        case 'file_type':\n          alert(lang.errorFileType.replace(/%fileName%/g, fileUpUtils.getFileName(options.fileData)));\n          break;\n        case 'load_bad_status':\n        case 'load_error':\n        case 'load_timeout':\n          var $file = options.file.getElement();\n          if ($file) {\n            var _message = eventName === 'load_bad_status' ? lang.errorBadStatus : lang.errorLoad;\n            $file.find('.fileup-abort').hide();\n            $file.find('.fileup-upload').show();\n            $file.find('.fileup-result').addClass('fileup-error').text(_message);\n          }\n          break;\n        case 'old_browser':\n          alert(lang.errorOldBrowser);\n          break;\n      }\n    },\n    /**\r\n     * Событие переноса файла через dropzone\r\n     * @param {Event} event\r\n     */\n    onDragOver: function onDragOver(event) {\n      event.stopPropagation();\n      event.preventDefault();\n      event.dataTransfer.dropEffect = 'copy';\n      var dropzone = this.getDropzone();\n      if (dropzone) {\n        dropzone.addClass('over');\n      }\n    },\n    /**\r\n     * Событие завершения перетаскивания с отпускаем кнопки мыши\r\n     * @param {Event} event\r\n     */\n    onDragLeave: function onDragLeave(event) {\n      var dropzone = this.getDropzone();\n      if (dropzone) {\n        dropzone.removeClass('over');\n      }\n    },\n    /**\r\n     * Событие когда перетаскиваемый элемент или выделенный текст покидают допустимую цель перетаскивания\r\n     * @param {Event} event\r\n     */\n    onDragEnd: function onDragEnd(event) {\n      var dropzone = this.getDropzone();\n      if (dropzone) {\n        dropzone.removeClass('over');\n      }\n    },\n    /**\r\n     * Событие переноса файла в dropzone\r\n     * @param {Event} event\r\n     */\n    onDragEnter: function onDragEnter(event) {\n      event.stopPropagation();\n      event.preventDefault();\n      event.dataTransfer.dropEffect = 'copy';\n    }\n  };\n\n  var fileUpPrivate = {\n    /**\r\n     *\r\n     * @param {object} fileUp\r\n     */\n    initInput: function initInput(fileUp) {\n      var input = null;\n      if (fileUp._options.input instanceof HTMLElement || fileUp._options.input instanceof jQuery) {\n        input = $(fileUp._options.input);\n      } else if (typeof fileUp._options.input === 'string' && fileUp._options.input) {\n        input = $('#' + fileUp._options.input);\n      }\n      if (!input || !$(input)[0] || $(input)[0].type !== 'file') {\n        throw new Error('Not found input element');\n      }\n      fileUp._input = input;\n    },\n    /**\r\n     *\r\n     * @param {object} fileUp\r\n     */\n    initQueue: function initQueue(fileUp) {\n      var queue = null;\n      if (fileUp._options.queue instanceof HTMLElement || fileUp._options.queue instanceof jQuery) {\n        queue = $(fileUp._options.queue);\n      } else if (typeof fileUp._options.queue === 'string' && fileUp._options.queue) {\n        queue = $('#' + fileUp._options.queue);\n      }\n      if (!queue || !$(queue)[0]) {\n        throw new Error('Not found queue element');\n      }\n      fileUp._queue = queue;\n    },\n    /**\r\n     *\r\n     * @param {object} fileUp\r\n     */\n    initDropzone: function initDropzone(fileUp) {\n      var dropzone = null;\n      if (fileUp._options.dropzone instanceof HTMLElement || fileUp._options.dropzone instanceof jQuery) {\n        dropzone = $(fileUp._options.dropzone);\n      } else if (typeof fileUp._options.dropzone === 'string' && fileUp._options.dropzone) {\n        dropzone = $('#' + fileUp._options.dropzone);\n      }\n      if (dropzone) {\n        fileUp._dropzone = dropzone;\n        var that = this;\n        dropzone.on('click', function () {\n          fileUp.getInput().click();\n        });\n        dropzone[0].addEventListener('dragover', function (event) {\n          that.trigger(fileUp, 'drag_over', [event]);\n        });\n        dropzone[0].addEventListener('dragleave', function (event) {\n          that.trigger(fileUp, 'drag_leave', [event]);\n        });\n        dropzone[0].addEventListener('dragenter', function (event) {\n          that.trigger(fileUp, 'drag_enter', [event]);\n        });\n        dropzone[0].addEventListener('dragend', function (event) {\n          that.trigger(fileUp, 'drag_end', [event]);\n        });\n        dropzone[0].addEventListener('drop', function (event) {\n          fileUp.getInput()[0].files = event.target.files || event.dataTransfer.files;\n          that.appendFiles(fileUp, event);\n        });\n      }\n    },\n    /**\r\n     * Инициализация событий\r\n     * @param {object} fileUp\r\n     */\n    initEvents: function initEvents(fileUp) {\n      /**\r\n       * @param {string}          name\r\n       * @param {function|string} func\r\n       */\n      function setEvent(name, func) {\n        var event = null;\n        if (typeof func === 'function') {\n          event = func;\n        } else if (typeof func === 'string') {\n          event = new Function(func);\n        }\n        if (event) {\n          fileUp.on(name, event);\n        }\n      }\n      var options = fileUp.getOptions();\n      var that = this;\n      setEvent('load_start', fileUpEvents.onLoadStart);\n      setEvent('load_progress', fileUpEvents.onLoadProgress);\n      setEvent('load_abort', fileUpEvents.onLoadAbort);\n      setEvent('load_success', fileUpEvents.onSuccess);\n      setEvent('error', fileUpEvents.onError);\n      setEvent('drag_over', fileUpEvents.onDragOver);\n      setEvent('drag_leave', fileUpEvents.onDragEnter);\n      setEvent('drag_end', fileUpEvents.onDragLeave);\n      setEvent('drag_enter', fileUpEvents.onDragEnd);\n      if (options.onSelect) {\n        setEvent('select', options.onSelect);\n      }\n      if (options.onRemove) {\n        setEvent('remove', options.onRemove);\n      }\n      if (options.onBeforeStart) {\n        setEvent('load_before_start', options.onBeforeStart);\n      }\n      if (options.onStart) {\n        setEvent('load_start', options.onStart);\n      }\n      if (options.onProgress) {\n        setEvent('load_progress', options.onProgress);\n      }\n      if (options.onAbort) {\n        setEvent('load_abort', options.onAbort);\n      }\n      if (options.onSuccess) {\n        setEvent('load_success', options.onSuccess);\n      }\n      if (options.onFinish) {\n        setEvent('load_finish', options.onFinish);\n      }\n      if (options.onError) {\n        setEvent('error', options.onError);\n      }\n      if (options.onDragOver) {\n        setEvent('drag_over', options.onDragOver);\n      }\n      if (options.onDragLeave) {\n        setEvent('drag_leave', options.onDragLeave);\n      }\n      if (options.onDragEnd) {\n        setEvent('drag_end', options.onDragEnd);\n      }\n      if (options.onDragEnter) {\n        setEvent('drag_enter', options.onDragEnter);\n      }\n      fileUp.getInput().on('change', function (event) {\n        that.appendFiles(fileUp, event);\n      });\n    },\n    /**\r\n     * Формирование списка ранее загруженных файлов\r\n     * @param {object} fileUp\r\n     */\n    renderFiles: function renderFiles(fileUp) {\n      var options = fileUp.getOptions();\n      if (Array.isArray(options.files) && options.files.length > 0) {\n        for (var i = 0; i < options.files.length; i++) {\n          if (!fileUpUtils.isObject(options.files[i])) {\n            continue;\n          }\n          fileUp.appendFileByData(options.files[i]);\n        }\n      }\n    },\n    /**\r\n     * @param fileUp\r\n     * @param name\r\n     * @param params\r\n     * @return {object}\r\n     * @private\r\n     */\n    trigger: function trigger(fileUp, name, params) {\n      params = params || [];\n      var results = [];\n      if (fileUp._events[name] instanceof Object && fileUp._events[name].length > 0) {\n        for (var i = 0; i < fileUp._events[name].length; i++) {\n          var callback = fileUp._events[name][i].callback;\n          results.push(callback.apply(fileUp._events[name][i].context || fileUp, params));\n          if (fileUp._events[name][i].singleExec) {\n            fileUp._events[name].splice(i, 1);\n            i--;\n          }\n        }\n      }\n      return results;\n    },\n    /**\r\n     * Append files in queue\r\n     * @param {object} fileUp\r\n     * @param {Event}  event\r\n     */\n    appendFiles: function appendFiles(fileUp, event) {\n      var _this = this;\n      event.preventDefault();\n      event.stopPropagation();\n      var options = fileUp.getOptions();\n      var input = fileUp.getInput();\n      var files = input[0].files;\n      var multiple = input.is(\"[multiple]\");\n      if (files.length > 0) {\n        var _loop = function _loop() {\n            var file = files[i];\n            if (options.sizeLimit > 0 && fileUpUtils.getFileSize(file) > options.sizeLimit) {\n              _this.trigger(fileUp, 'error', ['size_limit', {\n                fileData: file,\n                sizeLimit: options.sizeLimit\n              }]);\n              return 0; // continue\n            }\n            if (options.filesLimit > 0 && Object.keys(fileUp._files).length >= options.filesLimit) {\n              _this.trigger(fileUp, 'error', ['files_limit', {\n                fileData: file,\n                filesLimit: options.filesLimit\n              }]);\n              return 1; // break\n            }\n            if (typeof input[0].accept === 'string') {\n              var accept = input[0].accept;\n              if (accept && /[^\\w]+/.test(accept)) {\n                var isAccept = false;\n                var types = accept.split(',');\n                if (types.length > 0) {\n                  for (t = 0; t < types.length; t++) {\n                    types[t] = types[t].replace(/\\s/g, '');\n                    if (new RegExp(types[t].replace('*', '.*')).test(file.type) || new RegExp(types[t].replace('.', '.*/')).test(file.type)) {\n                      isAccept = true;\n                      break;\n                    }\n                  }\n                }\n                if (!isAccept) {\n                  _this.trigger(fileUp, 'error', ['file_type', {\n                    fileData: file\n                  }]);\n                  return 0; // continue\n                }\n              }\n            }\n            var results = _this.trigger(fileUp, 'select', [file]);\n            if (results) {\n              var isContinue = false;\n              $.each(results, function (key, result) {\n                if (result === false) {\n                  isContinue = true;\n                  return false;\n                }\n              });\n              if (isContinue) {\n                return 0; // continue\n              }\n            }\n            if (!multiple) {\n              fileUp.removeAll();\n            }\n            fileUp.appendFile(file);\n            if (!multiple) {\n              return 1; // break\n            }\n          },\n          t,\n          _ret;\n        for (var i = 0; i < files.length; i++) {\n          _ret = _loop();\n          if (_ret === 0) continue;\n          if (_ret === 1) break;\n        }\n        input.val('');\n      }\n      this.trigger(fileUp, 'dragEnd', [event]);\n    }\n  };\n\n  var fileUpFile = {\n    _options: {\n      name: null,\n      size: null,\n      urlPreview: null,\n      urlDownload: null\n    },\n    _id: '',\n    _status: 'stand_by',\n    _fileElement: null,\n    _file: null,\n    _fileUp: null,\n    _xhr: null,\n    /**\r\n     * Инициализация\r\n     * @param {object} fileUp\r\n     * @param {int}    id\r\n     * @param {object} options\r\n     * @param {File}   file\r\n     * @private\r\n     */\n    _init: function _init(fileUp, id, options, file) {\n      if (!fileUpUtils.isObject(options)) {\n        throw new Error('File incorrect options param');\n      }\n      if (typeof id !== 'number' || id < 0) {\n        throw new Error('File dont set or incorrect id param');\n      }\n      if (typeof options.name !== 'string' || !options.name) {\n        throw new Error('File dont set name param');\n      }\n      this._fileUp = fileUp;\n      this._options = $.extend(true, {}, this._options, options);\n      this._id = id;\n      if (file instanceof File) {\n        var xhr = null;\n        if (window.XMLHttpRequest) {\n          xhr = \"onload\" in new XMLHttpRequest() ? new XMLHttpRequest() : new XDomainRequest();\n        } else if (window.ActiveXObject) {\n          try {\n            xhr = new ActiveXObject(\"Msxml2.XMLHTTP\");\n          } catch (e) {\n            try {\n              xhr = new ActiveXObject(\"Microsoft.XMLHTTP\");\n            } catch (e) {\n              fileUpPrivate.trigger(fileUp, 'error', ['old_browser', {\n                file: this\n              }]);\n            }\n          }\n        } else {\n          fileUpPrivate.trigger(fileUp, 'error', ['old_browser', {\n            file: this\n          }]);\n        }\n        if (!xhr) {\n          throw new Error('xhr dont created. Check your browser');\n        }\n        this._xhr = xhr;\n        this._file = file;\n      } else {\n        this._status = 'finish';\n      }\n    },\n    /**\r\n     * Получение id файла\r\n     * @return {null}\r\n     */\n    getId: function getId() {\n      return this._id;\n    },\n    /**\r\n     * Получение name\r\n     * @return {string|null}\r\n     */\n    getName: function getName() {\n      return this._file ? fileUpUtils.getFileName(this._file) : this._options.name;\n    },\n    /**\r\n     * Получение элемента файла\r\n     * @return {jQuery|null}\r\n     */\n    getElement: function getElement() {\n      return this._fileElement;\n    },\n    /**\r\n     * Получение urlPreview\r\n     * @return {string|null}\r\n     */\n    getUrlPreview: function getUrlPreview() {\n      return this._options.urlPreview;\n    },\n    /**\r\n     * Получение urlDownload\r\n     * @return {string|null}\r\n     */\n    getUrlDownload: function getUrlDownload() {\n      return this._options.urlDownload;\n    },\n    /**\r\n     * Получение size\r\n     * @return {int|null}\r\n     */\n    getSize: function getSize() {\n      return this._file ? fileUpUtils.getFileSize(this._file) : this._options.size;\n    },\n    /**\r\n     * Formatting size\r\n     * @returns {string}\r\n     */\n    getSizeHuman: function getSizeHuman() {\n      var size = this.getSize();\n      return fileUpUtils.getSizeHuman(size);\n    },\n    /**\r\n     * Получение xhr\r\n     * @return {XMLHttpRequest|null}\r\n     */\n    getXhr: function getXhr() {\n      return this._xhr;\n    },\n    /**\r\n     * Получение файла\r\n     * @return {File|null}\r\n     */\n    getFile: function getFile() {\n      if (!(this._file instanceof File)) {\n        return null;\n      }\n      return this._file;\n    },\n    /**\r\n     * Получение статуса\r\n     * @return {string}\r\n     */\n    getStatus: function getStatus() {\n      return this._status;\n    },\n    /**\r\n     * Установка статуса\r\n     * @param {string} status\r\n     */\n    setStatus: function setStatus(status) {\n      if (typeof status !== 'string') {\n        return;\n      }\n      this._status = status;\n    },\n    /**\r\n     * Получение параметров\r\n     *\r\n     * @returns {object}\r\n     */\n    getOptions: function getOptions() {\n      return this._options;\n    },\n    /**\r\n     * Получение параметра\r\n     * @param {string} name\r\n     * @returns {*}\r\n     */\n    getOption: function getOption(name) {\n      if (typeof name !== 'string' || !this._options.hasOwnProperty(name)) {\n        return null;\n      }\n      return this._options[name];\n    },\n    /**\r\n     * Установка параметра\r\n     * @param {string} name\r\n     * @param {*}      value\r\n     */\n    setOption: function setOption(name, value) {\n      if (typeof name !== 'string') {\n        return;\n      }\n      this._options[name] = value;\n    },\n    /**\r\n     * Показ сообщения об ошибке\r\n     * @param {string} message\r\n     */\n    showError: function showError(message) {\n      if (typeof message !== 'string') {\n        return;\n      }\n      var element = this.getElement();\n      if (element) {\n        element.find('.fileup-result').removeClass('fileup-success').addClass('fileup-error').text(message);\n      }\n    },\n    /**\r\n     * Показ сообщения об успехе\r\n     * @param {string} message\r\n     */\n    showSuccess: function showSuccess(message) {\n      if (typeof message !== 'string') {\n        return;\n      }\n      var element = this.getElement();\n      if (element) {\n        element.find('.fileup-result').removeClass('fileup-error').addClass('fileup-success').text(message);\n      }\n    },\n    /**\r\n     * Удаление файла на странице и из памяти\r\n     */\n    remove: function remove() {\n      this.abort();\n      if (this._fileElement) {\n        this._fileElement.fadeOut('fast', function () {\n          this.remove();\n        });\n      }\n      var fileId = this.getId();\n      if (this._fileUp._files.hasOwnProperty(fileId)) {\n        delete this._fileUp._files[fileId];\n      }\n      fileUpPrivate.trigger(this._fileUp, 'remove', [this]);\n    },\n    /**\r\n     * Загрузка файла\r\n     * @return {boolean}\r\n     */\n    upload: function upload() {\n      var file = this.getFile();\n      var xhr = this.getXhr();\n      if (!file || !xhr) {\n        return false;\n      }\n      var options = this._fileUp.getOptions();\n      var that = this;\n      if (typeof options.timeout === 'number') {\n        xhr.timeout = options.timeout;\n      }\n\n      // запрос начат\n      xhr.onloadstart = function () {\n        that.setStatus('load_start');\n        fileUpPrivate.trigger(that._fileUp, 'load_start', [that]);\n      };\n\n      // браузер получил очередной пакет данных\n      xhr.upload.onprogress = function (ProgressEvent) {\n        fileUpPrivate.trigger(that._fileUp, 'load_progress', [that, ProgressEvent]);\n      };\n\n      // запрос был успешно (без ошибок) завершён\n      xhr.onload = function () {\n        that.setStatus('loaded');\n        if (xhr.status === 200) {\n          fileUpPrivate.trigger(that._fileUp, 'load_success', [that, xhr.responseText]);\n        } else {\n          fileUpPrivate.trigger(that._fileUp, 'error', ['load_bad_status', {\n            file: that,\n            fileData: file,\n            response: xhr.responseText,\n            xhr: xhr\n          }]);\n        }\n      };\n\n      // запрос был завершён (успешно или неуспешно)\n      xhr.onloadend = function () {\n        that.setStatus('finish');\n        fileUpPrivate.trigger(that._fileUp, 'load_finish', [that]);\n      };\n\n      // запрос был отменён вызовом xhr.abort()\n      xhr.onabort = function () {\n        that.setStatus('stand_by');\n        fileUpPrivate.trigger(that._fileUp, 'load_abort', [that]);\n      };\n\n      // запрос был прекращён по таймауту\n      xhr.ontimeout = function () {\n        that.setStatus('stand_by');\n        fileUpPrivate.trigger(that._fileUp, 'error', ['load_timeout', {\n          file: that,\n          fileData: file\n        }]);\n      };\n\n      // произошла ошибка\n      xhr.onerror = function (event) {\n        that.setStatus('stand_by');\n        fileUpPrivate.trigger(that._fileUp, 'error', ['load_error', {\n          file: that,\n          fileData: file,\n          event: event\n        }]);\n      };\n      xhr.open(options.httpMethod || 'post', options.url, true);\n      xhr.setRequestHeader('Cache-Control', 'no-cache');\n      xhr.setRequestHeader('X-Requested-With', 'XMLHttpRequest');\n      fileUpPrivate.trigger(that._fileUp, 'load_before_start', [that, xhr]);\n      if (window.FormData !== undefined) {\n        var formData = new FormData();\n        formData.append(options.fieldName, file);\n        if (Object.keys(options.extraFields).length) {\n          $.each(options.extraFields, function (name, value) {\n            formData.append(name, value);\n          });\n        }\n        return xhr.send(formData);\n      } else {\n        // IE 8,9\n        return xhr.send(file);\n      }\n    },\n    /**\r\n     * Отмена загрузки\r\n     */\n    abort: function abort() {\n      if (this._xhr) {\n        this._xhr.abort();\n      }\n    },\n    /**\r\n     * Рендер элемента\r\n     * @param {string} tpl\r\n     * @return {string|null}\r\n     */\n    render: function render(tpl) {\n      if (!tpl || typeof tpl !== 'string') {\n        return null;\n      }\n      var lang = this._fileUp.getLang();\n      var options = this._fileUp.getOptions();\n      var that = this;\n      var isNoPreview = false;\n      var mimeTypes = fileUpUtils.isObject(options.mimeTypes) ? options.mimeTypes : {};\n      var iconDefault = typeof options.iconDefault === 'string' ? options.iconDefault : '';\n      var showRemove = typeof options.showRemove === 'boolean' ? options.showRemove : true;\n      var size = this.getSizeHuman();\n      var icon = null;\n      var fileType = null;\n      var fileExt = null;\n      tpl = tpl.replace(/\\[NAME\\]/g, this.getName());\n      tpl = tpl.replace(/\\[SIZE\\]/g, size);\n      tpl = tpl.replace(/\\[UPLOAD\\]/g, lang.upload);\n      tpl = tpl.replace(/\\[REMOVE\\]/g, lang.remove);\n      tpl = tpl.replace(/\\[ABORT\\]/g, lang.abort);\n      if (this._file && this._file instanceof File) {\n        if (this._file.type && typeof this._file.type === 'string' && this._file.type.match(/^image\\/.*/)) {\n          if (typeof FileReader !== 'undefined') {\n            var reader = new FileReader();\n            reader.onload = function (ProgressEvent) {\n              if (that._fileElement) {\n                var preview = that._fileElement.find('.fileup-preview');\n                preview.removeClass('no-preview').find('img').attr('src', ProgressEvent.target.result);\n              }\n            };\n            reader.readAsDataURL(this._file);\n          }\n          isNoPreview = true;\n          tpl = tpl.replace(/\\[PREVIEW_SRC\\]/g, '');\n          tpl = tpl.replace(/\\[TYPE\\]/g, 'fileup-image fileup-no-preview');\n        } else {\n          tpl = tpl.replace(/\\[PREVIEW_SRC\\]/g, '');\n          tpl = tpl.replace(/\\[TYPE\\]/g, 'fileup-doc');\n          fileType = this._file.type;\n          fileExt = this.getName().split('.').pop();\n        }\n      } else {\n        var urlPreview = this.getUrlPreview();\n        tpl = tpl.replace(/\\[PREVIEW_SRC\\]/g, urlPreview ? urlPreview : '');\n        tpl = tpl.replace(/\\[TYPE\\]/g, urlPreview ? 'fileup-image' : 'fileup-doc');\n        fileExt = this.getName() ? this.getName().split('.').pop().toLowerCase() : '';\n      }\n      this._fileElement = $(tpl);\n      if (isNoPreview) {\n        this._fileElement.find('.fileup-preview').addClass('no-preview');\n      }\n      if (!size) {\n        this._fileElement.find('.fileup-size').hide();\n      }\n      if (fileType || fileExt) {\n        $.each(mimeTypes, function (name, type) {\n          if (!fileUpUtils.isObject(type) || !type.hasOwnProperty('icon') || typeof type.icon !== 'string' || type.icon === '') {\n            return;\n          }\n          if (fileType && type.hasOwnProperty('mime')) {\n            if (typeof type.mime === 'string') {\n              if (type.mime === fileType) {\n                icon = type.icon;\n                return false;\n              }\n            } else if (Array.isArray(type.mime)) {\n              $.each(type.mime, function (key, mime) {\n                if (typeof mime === 'string' && mime === fileType) {\n                  icon = type.icon;\n                  return false;\n                }\n              });\n              if (icon) {\n                return false;\n              }\n            } else if (type.mime instanceof RegExp) {\n              if (type.mime.test(fileType)) {\n                icon = type.icon;\n                return false;\n              }\n            }\n          }\n          if (fileExt && type.hasOwnProperty('ext') && Array.isArray(type.ext)) {\n            $.each(type.ext, function (key, ext) {\n              if (typeof ext === 'string' && ext === fileExt) {\n                icon = type.icon;\n                return false;\n              }\n            });\n            if (icon) {\n              return false;\n            }\n          }\n        });\n      }\n      if (!icon) {\n        icon = iconDefault;\n      }\n      this._fileElement.find('.fileup-icon').addClass(icon);\n      if (!showRemove) {\n        this._fileElement.find('.fileup-remove').hide();\n      }\n      if (this.getUrlDownload()) {\n        var $name = this._fileElement.find('.fileup-name');\n        if ($name[0]) {\n          $name.replaceWith('<a href=\"' + this.getUrlDownload() + '\" class=\"fileup-name\" download=\"' + this.getName() + '\">' + this.getName() + '</a>');\n        }\n      }\n      if (this._status === 'finish') {\n        this._fileElement.find('.fileup-upload').hide();\n        this._fileElement.find('.fileup-abort').hide();\n        this._fileElement.find('.fileup-progress').hide();\n      } else {\n        this._fileElement.find('.fileup-upload').click(function () {\n          that.upload();\n        });\n        this._fileElement.find('.fileup-abort').click(function () {\n          that.abort();\n        });\n      }\n      this._fileElement.find('.fileup-remove').click(function () {\n        that.remove();\n      });\n      return this._fileElement;\n    }\n  };\n\n  var tpl = Object.create(null);\n  tpl['file.html'] = '<div class=\"fileup-file [TYPE] mb-2 p-1 d-flex flex-nowrap gap-2 bg-light border border-secondary-subtle rounded rounded-1\"> <div class=\"fileup-preview\"> <img src=\"[PREVIEW_SRC]\" alt=\"[NAME]\" class=\"border rounded\"/> <i class=\"fileup-icon fs-4 text-secondary\"></i> </div> <div class=\"flex-fill\"> <div class=\"fileup-description\"> <span class=\"fileup-name\">[NAME]</span> <small class=\"fileup-size text-nowrap text-secondary\">([SIZE])</small> </div> <div class=\"fileup-controls mt-1 d-flex gap-2\"> <span class=\"fileup-remove\" title=\"[REMOVE]\">✕</span> <span class=\"fileup-upload link-primary\">[UPLOAD]</span> <span class=\"fileup-abort link-primary\" style=\"display:none\">[ABORT]</span> </div> <div class=\"fileup-result\"></div> <div class=\"fileup-progress progress mt-2 mb-1\"> <div class=\"fileup-progress-bar progress-bar\"></div> </div> </div> </div>';\n\n  var fileUpInstance = {\n    _options: {\n      id: null,\n      url: null,\n      input: null,\n      queue: null,\n      dropzone: null,\n      files: [],\n      fieldName: 'file',\n      extraFields: {},\n      lang: 'en',\n      langItems: null,\n      sizeLimit: 0,\n      filesLimit: 0,\n      httpMethod: 'post',\n      timeout: null,\n      autostart: false,\n      showRemove: true,\n      templateFile: null,\n      onSelect: null,\n      onRemove: null,\n      onBeforeStart: null,\n      onStart: null,\n      onProgress: null,\n      onAbort: null,\n      onSuccess: null,\n      onFinish: null,\n      onError: null,\n      onDragOver: null,\n      onDragLeave: null,\n      onDragEnd: null,\n      onDragEnter: null,\n      iconDefault: 'bi bi-file-earmark-text',\n      mimeTypes: {\n        archive: {\n          mime: ['application/zip', 'application/gzip', 'application/x-bzip', 'application/x-bzip2', 'application/x-7z-compressed'],\n          ext: ['zip', '7z', 'bz', 'bz2', 'gz', 'jar', 'rar', 'tar'],\n          icon: 'bi bi-file-earmark-zip'\n        },\n        word: {\n          mime: ['application/msword', 'application/vnd.openxmlformats-officedocument.wordprocessingml.document'],\n          ext: ['doc', 'docx'],\n          icon: 'bi bi-file-earmark-word'\n        },\n        excel: {\n          mime: ['application/vnd.ms-excel', 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet'],\n          ext: ['xls', 'xlsx'],\n          icon: 'bi bi-file-earmark-excel'\n        },\n        image: {\n          mime: /image\\/.*/,\n          ext: ['jpg', 'jpeg', 'png', 'bmp', 'gif', 'raw', 'webp', 'heic', 'ico'],\n          icon: 'bi bi-file-earmark-image'\n        },\n        video: {\n          mime: /video\\/.*/,\n          ext: ['avi', 'mp4', 'mpeg', 'ogv', 'ts', 'webm', '3gp', '3g2', 'mkv'],\n          icon: 'bi bi-file-earmark-play'\n        },\n        audio: {\n          mime: /audio\\/.*/,\n          ext: ['avi', 'mp4', 'mpeg', 'ogv', 'ts', 'webm', '3gp', '3g2', 'mkv'],\n          icon: 'bi bi-file-earmark-music'\n        },\n        pdf: {\n          mime: ['application/pdf'],\n          ext: ['pdf'],\n          icon: 'bi bi-file-earmark-pdf'\n        },\n        binary: {\n          mime: ['application\\/octet-stream'],\n          ext: ['bin', 'exe', 'dat', 'dll'],\n          icon: 'bi bi-file-earmark-binary'\n        }\n      }\n    },\n    _id: null,\n    _fileUp: null,\n    _fileIndex: 0,\n    _input: null,\n    _queue: null,\n    _dropzone: null,\n    _files: {},\n    _events: {},\n    /**\r\n     * Инициализация\r\n     * @param {object} fileUp\r\n     * @param {object} options\r\n     * @private\r\n     */\n    _init: function _init(fileUp, options) {\n      if (typeof options.url !== 'string' || !options.url) {\n        throw new Error('Dont set url param');\n      }\n      this._fileUp = fileUp;\n      this._options = $.extend(true, {}, this._options, options);\n      this._id = typeof this._options.id === 'string' && this._options.id ? this._options.id : fileUpUtils.hashCode();\n      if (!this._options.templateFile || typeof this._options.templateFile !== 'string') {\n        this._options.templateFile = tpl['file.html'];\n      }\n      fileUpPrivate.initInput(this);\n      fileUpPrivate.initQueue(this);\n      fileUpPrivate.initDropzone(this);\n      fileUpPrivate.initEvents(this);\n      fileUpPrivate.renderFiles(this);\n    },\n    /**\r\n     * Разрушение экземпляра\r\n     */\n    destruct: function destruct() {\n      var id = this.getId();\n      if (!this._fileUp._instances.hasOwnProperty(id)) {\n        return;\n      }\n      delete this._fileUp._instances[id];\n    },\n    /**\r\n     * Получение параметров\r\n     * @returns {object}\r\n     */\n    getOptions: function getOptions() {\n      return this._options;\n    },\n    /**\r\n     * Получение id\r\n     * @return {string|null}\r\n     */\n    getId: function getId() {\n      return this._id;\n    },\n    /**\r\n     * Получение input\r\n     * @return {jQuery|null}\r\n     */\n    getInput: function getInput() {\n      return this._input;\n    },\n    /**\r\n     * Получение queue\r\n     * @return {jQuery|null}\r\n     */\n    getQueue: function getQueue() {\n      return this._queue;\n    },\n    /**\r\n     * Получение dropzone\r\n     * @return {jQuery|null}\r\n     */\n    getDropzone: function getDropzone() {\n      return this._dropzone;\n    },\n    /**\r\n     * Подписка на событие\r\n     * @param {string}           eventName\r\n     * @param {function|string}  callback\r\n     * @param {object|undefined} context\r\n     */\n    on: function on(eventName, callback, context) {\n      if (_typeof(this._events[eventName]) !== 'object') {\n        this._events[eventName] = [];\n      }\n      this._events[eventName].push({\n        context: context || this,\n        callback: callback,\n        singleExec: false\n      });\n    },\n    /**\r\n     * Подписка на событие таким образом, что выполнение произойдет лишь один раз\r\n     * @param {string}           eventName\r\n     * @param {function|string}  callback\r\n     * @param {object|undefined} context\r\n     */\n    one: function one(eventName, callback, context) {\n      if (_typeof(this._events[eventName]) !== 'object') {\n        this._events[eventName] = [];\n      }\n      this._events[eventName].push({\n        context: context || this,\n        callback: callback,\n        singleExec: true\n      });\n    },\n    /**\r\n     * Получение настроек языка\r\n     */\n    getLang: function getLang() {\n      return $.extend(true, {}, this._options.langItems);\n    },\n    /**\r\n     * Получение всех файлов\r\n     * @return {object}\r\n     */\n    getFiles: function getFiles() {\n      return this._files;\n    },\n    /**\r\n     * Получение файла по его id\r\n     * @param {int} fileId\r\n     * @return {object|null}\r\n     */\n    getFileById: function getFileById(fileId) {\n      var result = null;\n      $.each(this._files, function (key, file) {\n        if (fileId === file.getId()) {\n          result = file;\n        }\n      });\n      return result;\n    },\n    /**\r\n     * Удаление всех файлов\r\n     */\n    removeAll: function removeAll() {\n      $.each(this._files, function (key, file) {\n        file.remove();\n      });\n    },\n    /**\r\n     * Загрузка всех файлов\r\n     */\n    uploadAll: function uploadAll() {\n      $.each(this._files, function (key, file) {\n        file.upload();\n      });\n    },\n    /**\r\n     * Отмена загрузки всех файлов\r\n     */\n    abortAll: function abortAll() {\n      $.each(this._files, function (key, file) {\n        file.abort();\n      });\n    },\n    /**\r\n     * Добавление файла в список из объекта File\r\n     * @param {object} file\r\n     * @result {boolean}\r\n     */\n    appendFile: function appendFile(file) {\n      if (!(file instanceof File)) {\n        return false;\n      }\n      var fileInstance = $.extend(true, {}, fileUpFile);\n      var data = {\n        name: fileUpUtils.getFileName(file),\n        size: fileUpUtils.getFileSize(file),\n        type: file.type\n      };\n      fileInstance._init(this, this._fileIndex, data, file);\n      this._files[this._fileIndex] = fileInstance;\n      var queue = this.getQueue();\n      if (queue) {\n        queue.append(fileInstance.render(this._options.templateFile));\n      }\n      this._fileIndex++;\n      if (typeof this._options.autostart === 'boolean' && this._options.autostart) {\n        fileInstance.upload();\n      }\n      return true;\n    },\n    /**\r\n     * Добавление файла в список из данных\r\n     * @param {object} data\r\n     * @result {boolean}\r\n     */\n    appendFileByData: function appendFileByData(data) {\n      if (!fileUpUtils.isObject(data)) {\n        return false;\n      }\n      var fileInstance = $.extend(true, {}, fileUpFile);\n      fileInstance._init(this, this._fileIndex, data);\n      fileInstance.setStatus('finish');\n      this._files[this._fileIndex] = fileInstance;\n      var queue = this.getQueue();\n      if (queue) {\n        queue.append(fileInstance.render(this._options.templateFile));\n      }\n      this._fileIndex++;\n      return true;\n    }\n  };\n\n  var fileUp = {\n    lang: {},\n    _instances: {},\n    /**\r\n     * Создание экземпляра\r\n     * @param {object} options\r\n     * @returns {object}\r\n     */\n    create: function create(options) {\n      options = fileUpUtils.isObject(options) ? options : {};\n      if (!options.hasOwnProperty('lang')) {\n        options.lang = 'en';\n      }\n      var langList = this.lang.hasOwnProperty(options.lang) ? this.lang[options.lang] : {};\n      options.langItems = options.hasOwnProperty('langItems') && fileUpUtils.isObject(options.langItems) ? $.extend(true, {}, langList, options.langItems) : langList;\n      var instance = $.extend(true, {}, fileUpInstance);\n      instance._init(this, options);\n      var id = instance.getId();\n      this._instances[id] = instance;\n      return instance;\n    },\n    /**\r\n     * Получение экземпляра по id\r\n     * @param {string} id\r\n     * @returns {object|null}\r\n     */\n    get: function get(id) {\n      if (!this._instances.hasOwnProperty(id)) {\n        return null;\n      }\n      if (!$.contains(document, this._instances[id]._input[0])) {\n        delete this._instances[id];\n        return null;\n      }\n      return this._instances[id];\n    }\n  };\n\n  fileUp.lang.en = {\n    upload: 'Upload',\n    abort: 'Abort',\n    remove: 'Remove',\n    complete: 'Complete',\n    error: 'Error',\n    errorLoad: 'Error uploading file',\n    errorBadStatus: 'Error uploading file. Bad request.',\n    errorFilesLimit: 'The number of selected files exceeds the limit (%filesLimit%)',\n    errorSizeLimit: 'File \"%fileName%\" exceeds the size limit (%sizeLimit%)',\n    errorFileType: 'File \"%fileName%\" is incorrect',\n    errorOldBrowser: 'Your browser can not upload files. Update to the latest version'\n  };\n\n  fileUp.lang.ru = {\n    upload: 'Загрузить',\n    abort: 'Остановить',\n    remove: 'Удалить',\n    complete: 'Готово',\n    error: 'Ошибка',\n    errorLoad: 'Ошибка при загрузке файла',\n    errorBadStatus: 'Ошибка при загрузке файла. Некорректный запрос.',\n    errorFilesLimit: 'Количество выбранных файлов превышает лимит (%filesLimit%)',\n    errorSizeLimit: 'Файл \"%fileName%\" превышает предельный размер (%sizeLimit%)',\n    errorFileType: 'Файл \"%fileName%\" является некорректным',\n    errorOldBrowser: 'Обновите ваш браузер до последней версии'\n  };\n\n  fileUp.lang.es = {\n    upload: 'Subir',\n    abort: 'Cancelar',\n    remove: 'Eliminar',\n    complete: 'Cargado',\n    error: 'Error',\n    errorLoad: 'Error al cargar el archivo',\n    errorBadStatus: 'Error al cargar el archivo. Solicitud no válida.',\n    errorFilesLimit: 'El número de archivo selecccionados excede el límite (%filesLimit%)',\n    errorSizeLimit: 'El archivo \"%fileName%\" excede el limite de tamaño (%sizeLimit%)',\n    errorFileType: 'El archivo \"%fileName%\" es inválido',\n    errorOldBrowser: 'Tu navegador no puede subir archivos. Actualiza a la última versión'\n  };\n\n  fileUp.lang.pt = {\n    upload: 'Enviar',\n    abort: 'Cancelar',\n    remove: 'Remover',\n    complete: 'Enviado',\n    error: 'Erro',\n    errorLoad: 'Erro ao carregar o arquivo',\n    errorBadStatus: 'Erro ao carregar o arquivo. Pedido inválido.',\n    errorFilesLimit: 'O número de arquivos selecionados excede o limite (%filesLimit%)',\n    errorSizeLimit: 'Arquivo \"%fileName%\" excede o limite (%sizeLimit%)',\n    errorFileType: 'Arquivo \"%fileName%\" inválido',\n    errorOldBrowser: 'Seu navegador não pode enviar os arquivos. Atualize para a versão mais recente'\n  };\n\n  return fileUp;\n\n}));\n"],"names":["global","factory","exports","module","define","amd","globalThis","self","fileUp","this","_typeof","o","Symbol","iterator","constructor","prototype","fileUpUtils","isObject","value","Array","isArray","isNumeric","num","trim","isNaN","getFileSize","file","File","size","fileSize","getFileName","name","fileName","getSizeHuman","result","Number","toFixed","hashCode","crc32","Date","getTime","Math","random","toString","str","c","a","f","n","t","length","charCodeAt","fileUpEvents","$file","getElement","find","hide","show","removeClass","text","ProgressEvent","lengthComputable","percent","ceil","loaded","total","css","lang","getLang","addClass","complete","eventName","options","alert","errorFilesLimit","replace","filesLimit","sizeLimit","message","errorSizeLimit","fileData","errorFileType","_message","errorBadStatus","errorLoad","errorOldBrowser","event","stopPropagation","preventDefault","dataTransfer","dropEffect","dropzone","getDropzone","fileUpPrivate","initInput","input","_options","HTMLElement","jQuery","$","type","Error","_input","initQueue","queue","_queue","initDropzone","that","_dropzone","on","getInput","click","addEventListener","trigger","files","target","appendFiles","initEvents","setEvent","func","Function","getOptions","onSelect","onRemove","onBeforeStart","onStart","onProgress","onAbort","onSuccess","onFinish","onError","onDragOver","onDragLeave","onDragEnd","onDragEnter","renderFiles","i","appendFileByData","params","results","_events","Object","callback","push","apply","context","singleExec","splice","_this","multiple","is","_ret","keys","_files","accept","test","isAccept","types","split","RegExp","isContinue","each","key","removeAll","appendFile","val","fileUpFile","urlPreview","urlDownload","_id","_status","_fileElement","_file","_fileUp","_xhr","_init","id","extend","xhr","window","XMLHttpRequest","XDomainRequest","ActiveXObject","e","getId","getName","getUrlPreview","getUrlDownload","getSize","getXhr","getFile","getStatus","setStatus","status","getOption","hasOwnProperty","setOption","showError","element","showSuccess","remove","abort","fadeOut","fileId","upload","formData","timeout","onloadstart","onprogress","onload","responseText","response","onloadend","onabort","ontimeout","onerror","open","httpMethod","url","setRequestHeader","undefined","FormData","append","fieldName","extraFields","send","render","tpl","isNoPreview","mimeTypes","iconDefault","showRemove","icon","fileType","fileExt","$name","match","FileReader","reader","attr","readAsDataURL","pop","toLowerCase","mime","ext","replaceWith","create","fileUpInstance","langItems","autostart","templateFile","archive","word","excel","image","video","audio","pdf","binary","_fileIndex","destruct","_instances","getQueue","one","getFiles","getFileById","uploadAll","abortAll","fileInstance","data","langList","instance","get","contains","document","en","error","ru","es","pt"],"mappings":"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"}
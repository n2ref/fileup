{"version":3,"file":"fileup.min.js","sources":["fileup.min.js"],"sourcesContent":["(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n  typeof define === 'function' && define.amd ? define(factory) :\n  (global = typeof globalThis !== 'undefined' ? globalThis : global || self, global.fileUp = factory());\n})(this, (function () { 'use strict';\n\n  function _typeof(o) {\n    \"@babel/helpers - typeof\";\n\n    return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) {\n      return typeof o;\n    } : function (o) {\n      return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o;\n    }, _typeof(o);\n  }\n\n  var fileUpUtils = {\n    /**\r\n     * Проверка на объект\r\n     * @param value\r\n     */\n    isObject: function isObject(value) {\n      return _typeof(value) === 'object' && !Array.isArray(value) && value !== null;\n    },\n    /**\r\n     * Проверка на число\r\n     * @param num\r\n     * @returns {boolean}\r\n     * @private\r\n     */\n    isNumeric: function isNumeric(num) {\n      return (typeof num === 'number' || typeof num === \"string\" && num.trim() !== '') && !isNaN(num);\n    },\n    /**\r\n     * Получение размера файла в байтах\r\n     * @param {File} file\r\n     * @return {int|null}\r\n     */\n    getFileSize: function getFileSize(file) {\n      if (!(file instanceof File)) {\n        return null;\n      }\n      return file.size || file.fileSize;\n    },\n    /**\r\n     * Получение названия файла\r\n     * @param {File} file\r\n     * @return {string|null}\r\n     */\n    getFileName: function getFileName(file) {\n      if (!(file instanceof File)) {\n        return null;\n      }\n      return file.name || file.fileName;\n    },\n    /**\r\n     * Formatting size\r\n     * @param {int} size\r\n     * @returns {string}\r\n     */\n    getSizeHuman: function getSizeHuman(size) {\n      if (!fileUpUtils.isNumeric(size)) {\n        return '';\n      }\n      size = Number(size);\n      var result = '';\n      if (size >= 1073741824) {\n        result = (size / 1073741824).toFixed(2) + ' Gb';\n      } else if (size >= 1048576) {\n        result = (size / 1048576).toFixed(2) + ' Mb';\n      } else if (size >= 1024) {\n        result = (size / 1024).toFixed(2) + ' Kb';\n      } else if (size >= 0) {\n        result = size + ' bytes';\n      }\n      return result;\n    },\n    /**\r\n     * Создание уникальной строки хэша\r\n     * @returns {string}\r\n     * @private\r\n     */\n    hashCode: function hashCode() {\n      return this.crc32((new Date().getTime() + Math.random()).toString()).toString(16);\n    },\n    /**\r\n     * Hash crc32\r\n     * @param str\r\n     * @returns {number}\r\n     * @private\r\n     */\n    crc32: function crc32(str) {\n      for (var a, o = [], c = 0; c < 256; c++) {\n        a = c;\n        for (var f = 0; f < 8; f++) {\n          a = 1 & a ? 3988292384 ^ a >>> 1 : a >>> 1;\n        }\n        o[c] = a;\n      }\n      for (var n = -1, t = 0; t < str.length; t++) {\n        n = n >>> 8 ^ o[255 & (n ^ str.charCodeAt(t))];\n      }\n      return (-1 ^ n) >>> 0;\n    }\n  };\n\n  var fileUpFile = {\n    _options: {\n      id: null,\n      name: null,\n      type: null,\n      size: null,\n      status: null,\n      urlPreview: null,\n      urlDownload: null\n    },\n    _id: '',\n    _status: 'stand_by',\n    _fileElement: null,\n    _fileData: null,\n    _fileUp: null,\n    _xhr: null,\n    /**\r\n     * Инициализация\r\n     * @param {object} fileUp\r\n     * @param {object} options\r\n     * @param {File}   fileData\r\n     * @private\r\n     */\n    _init: function _init(fileUp, options, fileData) {\n      if (!fileUpUtils.isObject(options)) {\n        throw new Error('File incorrect options param');\n      }\n      if (typeof options.id !== 'number' || options.id < 0) {\n        throw new Error('File dont set or incorrect id param');\n      }\n      if (typeof options.name !== 'string' || !options.name) {\n        throw new Error('File dont set name param');\n      }\n      this._fileUp = fileUp;\n      this._options = $.extend(true, {}, this._options, options);\n      this._id = this._options.id;\n      this._status = typeof this._options.status === 'string' && this._options.status ? this._options.status : 'stand_by';\n      if (fileData instanceof File) {\n        var xhr = null;\n        if (window.XMLHttpRequest) {\n          xhr = \"onload\" in new XMLHttpRequest() ? new XMLHttpRequest() : new XDomainRequest();\n        } else if (window.ActiveXObject) {\n          try {\n            xhr = new ActiveXObject(\"Msxml2.XMLHTTP\");\n          } catch (e) {\n            try {\n              xhr = new ActiveXObject(\"Microsoft.XMLHTTP\");\n            } catch (e) {\n              fileUpPrivate.trigger(fileUp, 'error', ['old_browser', {\n                file: this\n              }]);\n            }\n          }\n        } else {\n          fileUpPrivate.trigger(fileUp, 'error', ['old_browser', {\n            file: this\n          }]);\n        }\n        if (!xhr) {\n          throw new Error('xhr dont created. Check your browser');\n        }\n        this._xhr = xhr;\n        this._fileData = fileData;\n      } else {\n        this._status = 'finish';\n      }\n    },\n    /**\r\n     * Получение id файла\r\n     * @return {null}\r\n     */\n    getId: function getId() {\n      return this._id;\n    },\n    /**\r\n     * Получение name\r\n     * @return {string|null}\r\n     */\n    getName: function getName() {\n      return this._fileData ? fileUpUtils.getFileName(this._fileData) : this._options.name;\n    },\n    /**\r\n     * Получение элемента файла\r\n     * @return {jQuery|null}\r\n     */\n    getElement: function getElement() {\n      return this._fileElement;\n    },\n    /**\r\n     * Получение urlPreview\r\n     * @return {string|null}\r\n     */\n    getUrlPreview: function getUrlPreview() {\n      return this._options.urlPreview;\n    },\n    /**\r\n     * Получение urlDownload\r\n     * @return {string|null}\r\n     */\n    getUrlDownload: function getUrlDownload() {\n      return this._options.urlDownload;\n    },\n    /**\r\n     * Получение size\r\n     * @return {int|null}\r\n     */\n    getSize: function getSize() {\n      return this._fileData ? fileUpUtils.getFileSize(this._fileData) : this._options.size;\n    },\n    /**\r\n     * Formatting size\r\n     * @returns {string}\r\n     */\n    getSizeHuman: function getSizeHuman() {\n      var size = this.getSize();\n      return fileUpUtils.getSizeHuman(size);\n    },\n    /**\r\n     * Получение xhr\r\n     * @return {XMLHttpRequest|null}\r\n     */\n    getXhr: function getXhr() {\n      return this._xhr;\n    },\n    /**\r\n     * Получение файла\r\n     * @return {File|null}\r\n     */\n    getFileData: function getFileData() {\n      if (!(this._fileData instanceof File)) {\n        return null;\n      }\n      return this._fileData;\n    },\n    /**\r\n     * Получение статуса\r\n     * @return {string}\r\n     */\n    getStatus: function getStatus() {\n      return this._status;\n    },\n    /**\r\n     * Установка статуса\r\n     * @param {string} status\r\n     */\n    setStatus: function setStatus(status) {\n      if (typeof status !== 'string') {\n        return;\n      }\n      this._status = status;\n    },\n    /**\r\n     * Показ сообщения об ошибке\r\n     * @param {string} message\r\n     */\n    showError: function showError(message) {\n      if (typeof message !== 'string') {\n        return;\n      }\n      var element = this.getElement();\n      if (element) {\n        element.find('.fileup-result').removeClass('fileup-success').addClass('fileup-error').text(message);\n      }\n    },\n    /**\r\n     * Показ сообщения об успехе\r\n     * @param {string} message\r\n     */\n    showSuccess: function showSuccess(message) {\n      if (typeof message !== 'string') {\n        return;\n      }\n      var element = this.getElement();\n      if (element) {\n        element.find('.fileup-result').removeClass('fileup-error').addClass('fileup-success').text(message);\n      }\n    },\n    /**\r\n     * Удаление файла на странице и из памяти\r\n     */\n    remove: function remove() {\n      this.abort();\n      if (this._fileElement) {\n        this._fileElement.fadeOut('fast', function () {\n          this.remove();\n        });\n      }\n      var fileId = this.getId();\n      if (this._fileUp._files.hasOwnProperty(fileId)) {\n        delete this._fileUp._files[fileId];\n      }\n      fileUpPrivate.trigger(this._fileUp, 'remove', [this]);\n    },\n    /**\r\n     * Загрузка файла\r\n     * @return {boolean}\r\n     */\n    upload: function upload() {\n      var fileData = this.getFileData();\n      var xhr = this.getXhr();\n      if (!fileData || !xhr) {\n        return false;\n      }\n      var options = this._fileUp.getOptions();\n      var that = this;\n      if (typeof options.timeout === 'number') {\n        xhr.timeout = options.timeout;\n      }\n\n      // запрос начат\n      xhr.onloadstart = function () {\n        that.setStatus('load_start');\n        fileUpPrivate.trigger(that._fileUp, 'load_start', [that]);\n      };\n\n      // браузер получил очередной пакет данных\n      xhr.upload.onprogress = function (ProgressEvent) {\n        fileUpPrivate.trigger(that._fileUp, 'load_progress', [that, ProgressEvent]);\n      };\n\n      // запрос был успешно (без ошибок) завершён\n      xhr.onload = function () {\n        that.setStatus('loaded');\n        if (xhr.status === 200) {\n          fileUpPrivate.trigger(that._fileUp, 'load_success', [that, xhr.responseText]);\n        } else {\n          fileUpPrivate.trigger(that._fileUp, 'error', ['load_bad_status', {\n            file: that,\n            fileData: fileData,\n            response: xhr.responseText,\n            xhr: xhr\n          }]);\n        }\n      };\n\n      // запрос был завершён (успешно или неуспешно)\n      xhr.onloadend = function () {\n        that.setStatus('finish');\n        fileUpPrivate.trigger(that._fileUp, 'load_finish', [that]);\n      };\n\n      // запрос был отменён вызовом xhr.abort()\n      xhr.onabort = function () {\n        that.setStatus('stand_by');\n        fileUpPrivate.trigger(that._fileUp, 'load_abort', [that]);\n      };\n\n      // запрос был прекращён по таймауту\n      xhr.ontimeout = function () {\n        that.setStatus('stand_by');\n        fileUpPrivate.trigger(that._fileUp, 'error', ['load_timeout', {\n          file: that,\n          fileData: fileData\n        }]);\n      };\n\n      // произошла ошибка\n      xhr.onerror = function (event) {\n        that.setStatus('stand_by');\n        fileUpPrivate.trigger(that._fileUp, 'error', ['load_error', {\n          file: that,\n          fileData: fileData,\n          event: event\n        }]);\n      };\n      xhr.open(options.httpMethod || 'post', options.url, true);\n      xhr.setRequestHeader('Cache-Control', 'no-cache');\n      xhr.setRequestHeader('X-Requested-With', 'XMLHttpRequest');\n      fileUpPrivate.trigger(that._fileUp, 'load_before_start', [that, xhr]);\n      if (window.FormData !== undefined) {\n        var formData = new FormData();\n        formData.append(options.fieldName, fileData);\n        if (Object.keys(options.extraFields).length) {\n          $.each(options.extraFields, function (name, value) {\n            formData.append(name, value);\n          });\n        }\n        return xhr.send(formData);\n      } else {\n        // IE 8,9\n        return xhr.send(fileData);\n      }\n    },\n    /**\r\n     * Отмена загрузки\r\n     */\n    abort: function abort() {\n      if (this._xhr) {\n        this._xhr.abort();\n      }\n    },\n    /**\r\n     * Рендер элемента\r\n     * @param {string} tpl\r\n     * @return {string|null}\r\n     */\n    render: function render(tpl) {\n      if (!tpl || typeof tpl !== 'string') {\n        return null;\n      }\n      var lang = this._fileUp.getLang();\n      var options = this._fileUp.getOptions();\n      var that = this;\n      var isNoPreview = false;\n      var mimeTypes = fileUpUtils.isObject(options.mimeTypes) ? options.mimeTypes : {};\n      var iconDefault = typeof options.iconDefault === 'string' ? options.iconDefault : '';\n      var showClose = typeof options.showClose === 'boolean' ? options.showClose : true;\n      var size = this.getSizeHuman();\n      var icon = null;\n      var fileType = null;\n      var fileExt = null;\n      tpl = tpl.replace(/\\[ID\\]/g, this.getId());\n      tpl = tpl.replace(/\\[NAME\\]/g, this.getName());\n      tpl = tpl.replace(/\\[SIZE\\]/g, size);\n      tpl = tpl.replace(/\\[UPLOAD\\]/g, lang.upload);\n      tpl = tpl.replace(/\\[REMOVE\\]/g, lang.remove);\n      tpl = tpl.replace(/\\[ABORT\\]/g, lang.abort);\n      if (this._fileData && this._fileData instanceof File) {\n        if (this._fileData.type && typeof this._fileData.type === 'string' && this._fileData.type.match(/^image\\/.*/)) {\n          if (typeof FileReader !== 'undefined') {\n            var reader = new FileReader();\n            reader.onload = function (ProgressEvent) {\n              if (that._fileElement) {\n                var preview = that._fileElement.find('.fileup-preview');\n                preview.removeClass('no-preview').find('img').attr('src', ProgressEvent.target.result);\n              }\n            };\n            reader.readAsDataURL(this._fileData);\n          }\n          isNoPreview = true;\n          tpl = tpl.replace(/\\[PREVIEW_SRC\\]/g, '');\n          tpl = tpl.replace(/\\[TYPE\\]/g, 'fileup-image fileup-no-preview');\n        } else {\n          tpl = tpl.replace(/\\[PREVIEW_SRC\\]/g, '');\n          tpl = tpl.replace(/\\[TYPE\\]/g, 'fileup-doc');\n          fileType = this._fileData.type;\n          fileExt = this.getName().split('.').pop();\n        }\n      } else {\n        var urlPreview = this.getUrlPreview();\n        tpl = tpl.replace(/\\[PREVIEW_SRC\\]/g, urlPreview ? urlPreview : '');\n        tpl = tpl.replace(/\\[TYPE\\]/g, urlPreview ? 'fileup-image' : 'fileup-doc');\n        fileExt = this.getName() ? this.getName().split('.').pop() : '';\n      }\n      this._fileElement = $(tpl);\n      if (isNoPreview) {\n        this._fileElement.find('.fileup-preview').addClass('no-preview');\n      }\n      if (!size) {\n        this._fileElement.find('.fileup-size').hide();\n      }\n      if (fileType || fileExt) {\n        $.each(mimeTypes, function (name, type) {\n          if (!fileUpUtils.isObject(type) || !type.hasOwnProperty('icon') || typeof type.icon !== 'string' || type.icon === '') {\n            return;\n          }\n          if (fileType && type.hasOwnProperty('mime')) {\n            if (typeof type.mime === 'string') {\n              if (type.mime === fileType) {\n                icon = type.icon;\n                return false;\n              }\n            } else if (Array.isArray(type.mime)) {\n              $.each(type.mime, function (key, mime) {\n                if (typeof mime === 'string' && mime === fileType) {\n                  icon = type.icon;\n                  return false;\n                }\n              });\n              if (icon) {\n                return false;\n              }\n            } else if (type.mime instanceof RegExp) {\n              if (type.mime.test(fileType)) {\n                icon = type.icon;\n                return false;\n              }\n            }\n          }\n          if (fileExt && type.hasOwnProperty('ext') && Array.isArray(type.ext)) {\n            $.each(type.ext, function (key, ext) {\n              if (typeof ext === 'string' && ext === fileExt) {\n                icon = type.icon;\n                return false;\n              }\n            });\n            if (icon) {\n              return false;\n            }\n          }\n        });\n      }\n      if (!icon) {\n        icon = iconDefault;\n      }\n      this._fileElement.find('.fileup-icon').addClass(icon);\n      if (!showClose) {\n        this._fileElement.find('.fileup-remove').hide();\n      }\n      if (this.getUrlDownload()) {\n        var $name = this._fileElement.find('.fileup-name');\n        if ($name[0]) {\n          $name.replaceWith('<a href=\"' + this.getUrlDownload() + '\" class=\"fileup-name\" download=\"' + this.getName() + '\">' + this.getName() + '</a>');\n        }\n      }\n      if (this._status === 'finish') {\n        this._fileElement.find('.fileup-upload').hide();\n        this._fileElement.find('.fileup-abort').hide();\n        this._fileElement.find('.fileup-progress').hide();\n      } else {\n        this._fileElement.find('.fileup-upload').click(function () {\n          that.upload();\n        });\n        this._fileElement.find('.fileup-abort').click(function () {\n          that.abort();\n        });\n      }\n      this._fileElement.find('.fileup-remove').click(function () {\n        that.remove();\n      });\n      return this._fileElement;\n    }\n  };\n\n  var fileUpEvents = {\n    /**\r\n     * Событие начала загрузки\r\n     * @param {object} file\r\n     */\n    onLoadStart: function onLoadStart(file) {\n      var $file = file.getElement();\n      if ($file) {\n        $file.find('.fileup-upload').hide();\n        $file.find('.fileup-abort').show();\n        $file.find('.fileup-result').removeClass('fileup-error').removeClass('fileup-success').text('');\n      }\n    },\n    /**\r\n     * Событие начала изменения прогресса загрузки\r\n     * @param {object}        file\r\n     * @param {ProgressEvent} ProgressEvent\r\n     */\n    onLoadProgress: function onLoadProgress(file, ProgressEvent) {\n      if (ProgressEvent.lengthComputable) {\n        var percent = Math.ceil(ProgressEvent.loaded / ProgressEvent.total * 100);\n        var $file = file.getElement();\n        if ($file) {\n          $file.find('.fileup-progress-bar').css('width', percent + \"%\");\n        }\n      }\n    },\n    /**\r\n     * Событие начала загрузки\r\n     * @param {object} file\r\n     */\n    onLoadAbort: function onLoadAbort(file) {\n      var $file = file.getElement();\n      if ($file) {\n        $file.find('.fileup-abort').hide();\n        $file.find('.fileup-upload').show();\n        $file.find('.fileup-result').removeClass('fileup-error').removeClass('fileup-success').text('');\n      }\n    },\n    /**\r\n     * Событие успешной загрузки файла\r\n     * @param {object} file\r\n     */\n    onSuccess: function onSuccess(file) {\n      var $file = file.getElement();\n      if ($file) {\n        var lang = this.getLang();\n        $file.find('.fileup-abort').hide();\n        $file.find('.fileup-upload').hide();\n        $file.find('.fileup-result').removeClass('fileup-error').addClass('fileup-success').text(lang.complete);\n      }\n    },\n    /**\r\n     * Событие ошибки\r\n     * @param {string} eventName\r\n     * @param {object} options\r\n     */\n    onError: function onError(eventName, options) {\n      var lang = this.getLang();\n      switch (eventName) {\n        case 'files_limit':\n          alert(lang.errorFilesLimit.replace(/%filesLimit%/g, options.filesLimit));\n          break;\n        case 'size_limit':\n          var size = fileUpUtils.getSizeHuman(options.sizeLimit);\n          var message = lang.errorSizeLimit;\n          message = message.replace(/%sizeLimit%/g, size);\n          message = message.replace(/%fileName%/g, fileUpUtils.getFileName(options.fileData));\n          alert(message);\n          break;\n        case 'file_type':\n          alert(lang.errorFileType.replace(/%fileName%/g, fileUpUtils.getFileName(options.fileData)));\n          break;\n        case 'load_bad_status':\n        case 'load_error':\n        case 'load_timeout':\n          var $file = options.file.getElement();\n          if ($file) {\n            var _message = eventName === 'load_bad_status' ? lang.errorBadStatus : lang.errorLoad;\n            $file.find('.fileup-abort').hide();\n            $file.find('.fileup-upload').show();\n            $file.find('.fileup-result').addClass('fileup-error').text(_message);\n          }\n          break;\n        case 'old_browser':\n          alert(lang.errorOldBrowser);\n          break;\n      }\n    },\n    /**\r\n     * Событие переноса файла через dropzone\r\n     * @param {Event} event\r\n     */\n    onDragOver: function onDragOver(event) {\n      event.stopPropagation();\n      event.preventDefault();\n      event.dataTransfer.dropEffect = 'copy';\n      var dropzone = this.getDropzone();\n      if (dropzone) {\n        dropzone.addClass('over');\n      }\n    },\n    /**\r\n     * Событие завершения перетаскивания с отпускаем кнопки мыши\r\n     * @param {Event} event\r\n     */\n    onDragLeave: function onDragLeave(event) {\n      var dropzone = this.getDropzone();\n      if (dropzone) {\n        dropzone.removeClass('over');\n      }\n    },\n    /**\r\n     * Событие когда перетаскиваемый элемент или выделенный текст покидают допустимую цель перетаскивания\r\n     * @param {Event} event\r\n     */\n    onDragEnd: function onDragEnd(event) {\n      var dropzone = this.getDropzone();\n      if (dropzone) {\n        dropzone.removeClass('over');\n      }\n    },\n    /**\r\n     * Событие переноса файла в dropzone\r\n     * @param {Event} event\r\n     */\n    onDragEnter: function onDragEnter(event) {\n      event.stopPropagation();\n      event.preventDefault();\n      event.dataTransfer.dropEffect = 'copy';\n    }\n  };\n\n  var fileUpPrivate = {\n    /**\r\n     *\r\n     * @param {object} fileUp\r\n     */\n    initInput: function initInput(fileUp) {\n      var input = null;\n      if (fileUp._options.input instanceof HTMLElement || fileUp._options.input instanceof jQuery) {\n        input = $(fileUp._options.input);\n      } else if (typeof fileUp._options.input === 'string' && fileUp._options.input) {\n        input = $('#' + fileUp._options.input);\n      }\n      if (!input || !$(input)[0] || $(input)[0].type !== 'file') {\n        throw new Error('Not found input element');\n      }\n      fileUp._input = input;\n    },\n    /**\r\n     *\r\n     * @param {object} fileUp\r\n     */\n    initQueue: function initQueue(fileUp) {\n      var queue = null;\n      if (fileUp._options.queue instanceof HTMLElement || fileUp._options.queue instanceof jQuery) {\n        queue = $(fileUp._options.queue);\n      } else if (typeof fileUp._options.queue === 'string' && fileUp._options.queue) {\n        queue = $('#' + fileUp._options.queue);\n      }\n      if (!queue || !$(queue)[0]) {\n        throw new Error('Not found queue element');\n      }\n      fileUp._queue = queue;\n    },\n    /**\r\n     *\r\n     * @param {object} fileUp\r\n     */\n    initDropzone: function initDropzone(fileUp) {\n      var dropzone = null;\n      if (fileUp._options.dropzone instanceof HTMLElement || fileUp._options.dropzone instanceof jQuery) {\n        dropzone = $(fileUp._options.dropzone);\n      } else if (typeof fileUp._options.dropzone === 'string' && fileUp._options.dropzone) {\n        dropzone = $('#' + fileUp._options.dropzone);\n      }\n      if (dropzone) {\n        fileUp._dropzone = dropzone;\n        var that = this;\n        dropzone.on('click', function () {\n          fileUp.getInput().click();\n        });\n        dropzone[0].addEventListener('dragover', function (event) {\n          that.trigger(fileUp, 'dragOver', [event]);\n        });\n        dropzone[0].addEventListener('dragleave', function (event) {\n          that.trigger(fileUp, 'dragLeave', [event]);\n        });\n        dropzone[0].addEventListener('dragenter', function (event) {\n          that.trigger(fileUp, 'dragEnter', [event]);\n        });\n        dropzone[0].addEventListener('dragend', function (event) {\n          that.trigger(fileUp, 'dragEnd', [event]);\n        });\n        dropzone[0].addEventListener('drop', function (event) {\n          fileUp.getInput()[0].files = event.target.files || event.dataTransfer.files;\n          that.appendFiles(fileUp, event);\n        });\n      }\n    },\n    /**\r\n     * Инициализация событий\r\n     * @param {object} fileUp\r\n     */\n    initEvents: function initEvents(fileUp) {\n      /**\r\n       * @param {string}          name\r\n       * @param {function|string} func\r\n       */\n      function setEvent(name, func) {\n        var event = null;\n        if (typeof func === 'function') {\n          event = func;\n        } else if (typeof func === 'string') {\n          event = new Function(func);\n        }\n        if (event) {\n          fileUp.on(name, event);\n        }\n      }\n      var options = fileUp.getOptions();\n      var that = this;\n      setEvent('load_start', fileUpEvents.onLoadStart);\n      setEvent('load_progress', fileUpEvents.onLoadProgress);\n      setEvent('load_abort', fileUpEvents.onLoadAbort);\n      setEvent('load_success', fileUpEvents.onSuccess);\n      setEvent('error', fileUpEvents.onError);\n      setEvent('dragOver', fileUpEvents.onDragOver);\n      setEvent('dragEnter', fileUpEvents.onDragEnter);\n      setEvent('dragLeave', fileUpEvents.onDragLeave);\n      setEvent('dragEnd', fileUpEvents.onDragEnd);\n      if (options.onSelect) {\n        setEvent('select', options.onSelect);\n      }\n      if (options.onRemove) {\n        setEvent('remove', options.onRemove);\n      }\n      if (options.onBeforeStart) {\n        setEvent('load_before_start', options.onBeforeStart);\n      }\n      if (options.onStart) {\n        setEvent('load_start', options.onStart);\n      }\n      if (options.onProgress) {\n        setEvent('load_progress', options.onProgress);\n      }\n      if (options.onAbort) {\n        setEvent('load_abort', options.onAbort);\n      }\n      if (options.onSuccess) {\n        setEvent('load_success', options.onSuccess);\n      }\n      if (options.onFinish) {\n        setEvent('load_finish', options.onFinish);\n      }\n      if (options.onError) {\n        setEvent('error', options.onError);\n      }\n      if (options.onDragOver) {\n        setEvent('dragOver', options.onDragOver);\n      }\n      if (options.onDragLeave) {\n        setEvent('dragLeave', options.onDragLeave);\n      }\n      if (options.onDragEnd) {\n        setEvent('dragEnd', options.onDragEnd);\n      }\n      if (options.onDragEnter) {\n        setEvent('dragEnter', options.onDragEnter);\n      }\n      fileUp.getInput().on('change', function (event) {\n        that.appendFiles(fileUp, event);\n      });\n    },\n    /**\r\n     * Формирование списка ранее загруженных файлов\r\n     * @param {object} fileUp\r\n     */\n    renderFiles: function renderFiles(fileUp) {\n      var options = fileUp.getOptions();\n      if (Array.isArray(options.files) && options.files.length > 0) {\n        for (var i = 0; i < options.files.length; i++) {\n          if (!fileUpUtils.isObject(options.files[i])) {\n            continue;\n          }\n          options.files[i].id = fileUp._fileIndex;\n          options.files[i].status = 'loaded';\n          this.appendFileByData(fileUp, options.files[i]);\n        }\n      }\n    },\n    /**\r\n     * @param fileUp\r\n     * @param name\r\n     * @param params\r\n     * @return {object}\r\n     * @private\r\n     */\n    trigger: function trigger(fileUp, name, params) {\n      params = params || [];\n      var results = [];\n      if (fileUp._events[name] instanceof Object && fileUp._events[name].length > 0) {\n        for (var i = 0; i < fileUp._events[name].length; i++) {\n          var callback = fileUp._events[name][i].callback;\n          results.push(callback.apply(fileUp._events[name][i].context || fileUp, params));\n          if (fileUp._events[name][i].singleExec) {\n            fileUp._events[name].splice(i, 1);\n            i--;\n          }\n        }\n      }\n      return results;\n    },\n    /**\r\n     * Append files in queue\r\n     * @param {object} fileUp\r\n     * @param {Event}  event\r\n     */\n    appendFiles: function appendFiles(fileUp, event) {\n      var _this = this;\n      event.preventDefault();\n      event.stopPropagation();\n      var options = fileUp.getOptions();\n      var input = fileUp.getInput();\n      var files = input[0].files;\n      var multiple = input.is(\"[multiple]\");\n      if (files.length > 0) {\n        var _loop = function _loop() {\n            var file = files[i];\n            if (options.sizeLimit > 0 && fileUpUtils.getFileSize(file) > options.sizeLimit) {\n              _this.trigger(fileUp, 'error', ['size_limit', {\n                fileData: file,\n                sizeLimit: options.sizeLimit\n              }]);\n              return 0; // continue\n            }\n            if (options.filesLimit > 0 && Object.keys(fileUp._files).length >= options.filesLimit) {\n              _this.trigger(fileUp, 'error', ['files_limit', {\n                fileData: file,\n                filesLimit: options.filesLimit\n              }]);\n              return 1; // break\n            }\n            if (typeof input[0].accept === 'string') {\n              var accept = input[0].accept;\n              if (accept && /[^\\w]+/.test(accept)) {\n                var isAccept = false;\n                var types = accept.split(',');\n                if (types.length > 0) {\n                  for (t = 0; t < types.length; t++) {\n                    types[t] = types[t].replace(/\\s/g, '');\n                    if (new RegExp(types[t].replace('*', '.*')).test(file.type) || new RegExp(types[t].replace('.', '.*/')).test(file.type)) {\n                      isAccept = true;\n                      break;\n                    }\n                  }\n                }\n                if (!isAccept) {\n                  _this.trigger(fileUp, 'error', ['file_type', {\n                    fileData: file\n                  }]);\n                  return 0; // continue\n                }\n              }\n            }\n            var results = _this.trigger(fileUp, 'select', [file]);\n            if (results) {\n              var isContinue = false;\n              $.each(results, function (key, result) {\n                if (result === false) {\n                  isContinue = true;\n                  return false;\n                }\n              });\n              if (isContinue) {\n                return 0; // continue\n              }\n            }\n            if (!multiple) {\n              fileUp.removeAll();\n            }\n            _this.appendFile(fileUp, file);\n            if (!multiple) {\n              return 1; // break\n            }\n          },\n          t,\n          _ret;\n        for (var i = 0; i < files.length; i++) {\n          _ret = _loop();\n          if (_ret === 0) continue;\n          if (_ret === 1) break;\n        }\n        input.val('');\n      }\n      this.trigger(fileUp, 'dragEnd', [event]);\n    },\n    /**\r\n     * Добавление файла в список из объекта File\r\n     * @param {object} fileUp\r\n     * @param {object} file\r\n     */\n    appendFile: function appendFile(fileUp, file) {\n      var options = fileUp.getOptions();\n      var fileInstance = $.extend(true, {}, fileUpFile);\n      var data = {\n        id: fileUp._fileIndex,\n        name: fileUpUtils.getFileName(file),\n        size: fileUpUtils.getFileSize(file),\n        type: file.type\n      };\n      fileInstance._init(fileUp, data, file);\n      fileUp._files[fileUp._fileIndex] = fileInstance;\n      var queue = fileUp.getQueue();\n      if (queue) {\n        queue.append(fileInstance.render(options.templateFile));\n      }\n      fileUp._fileIndex++;\n      if (typeof fileUp._options.autostart === 'boolean' && fileUp._options.autostart) {\n        fileInstance.upload();\n      }\n    },\n    /**\r\n     * Добавление файла в список из данных\r\n     * @param {object} fileUp\r\n     * @param {object} data\r\n     */\n    appendFileByData: function appendFileByData(fileUp, data) {\n      var options = fileUp.getOptions();\n      var fileInstance = $.extend(true, {}, fileUpFile);\n      fileInstance._init(fileUp, data);\n      fileUp._files[fileUp._fileIndex] = fileInstance;\n      var queue = fileUp.getQueue();\n      if (queue) {\n        queue.append(fileInstance.render(options.templateFile));\n      }\n      fileUp._fileIndex++;\n    }\n  };\n\n  var tpl = Object.create(null);\n  tpl['file.html'] = '<div class=\"fileup-file [TYPE] mb-2 p-1 d-flex flex-nowrap gap-2 bg-light border border-secondary-subtle rounded rounded-1\"> <div class=\"fileup-preview\"> <img src=\"[PREVIEW_SRC]\" alt=\"[NAME]\" class=\"border rounded\"/> <i class=\"fileup-icon fs-4 text-secondary\"></i> </div> <div class=\"flex-fill\"> <div class=\"fileup-description\"> <span class=\"fileup-name\">[NAME]</span> <small class=\"fileup-size text-nowrap text-secondary\">([SIZE])</small> </div> <div class=\"fileup-controls mt-1 d-flex gap-2\"> <span class=\"fileup-remove\" title=\"[REMOVE]\">✕</span> <span class=\"fileup-upload link-primary\">[UPLOAD]</span> <span class=\"fileup-abort link-primary\" style=\"display:none\">[ABORT]</span> </div> <div class=\"fileup-result\"></div> <div class=\"fileup-progress progress mt-2 mb-1\"> <div class=\"fileup-progress-bar progress-bar\"></div> </div> </div> </div>';\n\n  var fileUpInstance = {\n    _options: {\n      id: null,\n      url: null,\n      input: null,\n      queue: null,\n      dropzone: null,\n      files: [],\n      fieldName: 'file',\n      extraFields: {},\n      lang: 'en',\n      langItems: null,\n      sizeLimit: 0,\n      filesLimit: 0,\n      httpMethod: 'post',\n      timeout: null,\n      autostart: false,\n      showClose: true,\n      templateFile: null,\n      onSelect: null,\n      onRemove: null,\n      onBeforeStart: null,\n      onStart: null,\n      onProgress: null,\n      onAbort: null,\n      onSuccess: null,\n      onFinish: null,\n      onError: null,\n      onDragOver: null,\n      onDragLeave: null,\n      onDragEnd: null,\n      onDragEnter: null,\n      iconDefault: 'bi bi-file-earmark-text',\n      mimeTypes: {\n        archive: {\n          mime: ['application/zip', 'application/gzip', 'application/x-bzip', 'application/x-bzip2', 'application/x-7z-compressed'],\n          ext: ['zip', '7z', 'bz', 'bz2', 'gz', 'jar', 'rar', 'tar'],\n          icon: 'bi bi-file-earmark-zip'\n        },\n        word: {\n          mime: ['application/msword', 'application/vnd.openxmlformats-officedocument.wordprocessingml.document'],\n          ext: ['doc', 'docx'],\n          icon: 'bi bi-file-earmark-word'\n        },\n        excel: {\n          mime: ['application/vnd.ms-excel', 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet'],\n          ext: ['xls', 'xlsx'],\n          icon: 'bi bi-file-earmark-excel'\n        },\n        video: {\n          mime: /video\\/.*/,\n          ext: ['avi', 'mp4', 'mpeg', 'ogv', 'ts', 'webm', '3gp', '3g2', 'mkv'],\n          icon: 'bi bi-file-earmark-play'\n        },\n        audio: {\n          mime: /audio\\/.*/,\n          ext: ['avi', 'mp4', 'mpeg', 'ogv', 'ts', 'webm', '3gp', '3g2', 'mkv'],\n          icon: 'bi bi-file-earmark-music'\n        },\n        pdf: {\n          mime: ['application/pdf'],\n          ext: ['pdf'],\n          icon: 'bi bi-file-earmark-pdf'\n        },\n        binary: {\n          mime: ['application\\/octet-stream'],\n          ext: ['bin', 'exe', 'dat', 'dll'],\n          icon: 'bi bi-file-earmark-binary'\n        }\n      }\n    },\n    _id: null,\n    _fileIndex: 0,\n    _input: null,\n    _queue: null,\n    _dropzone: null,\n    _files: {},\n    _events: {},\n    /**\r\n     * Инициализация\r\n     * @param {object} options\r\n     * @private\r\n     */\n    _init: function _init(options) {\n      if (typeof options.url !== 'string' || !options.url) {\n        throw new Error('Dont set url param');\n      }\n      this._options = $.extend(true, {}, this._options, options);\n      this._id = typeof this._options.id === 'string' && this._options.id ? this._options.id : fileUpUtils.hashCode();\n      if (!this._options.templateFile || typeof this._options.templateFile !== 'string') {\n        this._options.templateFile = tpl['file.html'];\n      }\n      fileUpPrivate.initInput(this);\n      fileUpPrivate.initQueue(this);\n      fileUpPrivate.initDropzone(this);\n      fileUpPrivate.initEvents(this);\n      fileUpPrivate.renderFiles(this);\n    },\n    /**\r\n     * Получение параметров\r\n     * @returns {object}\r\n     */\n    getOptions: function getOptions() {\n      return this._options;\n    },\n    /**\r\n     * Получение id\r\n     * @return {string|null}\r\n     */\n    getId: function getId() {\n      return this._id;\n    },\n    /**\r\n     * Получение input\r\n     * @return {jQuery|null}\r\n     */\n    getInput: function getInput() {\n      return this._input;\n    },\n    /**\r\n     * Получение queue\r\n     * @return {jQuery|null}\r\n     */\n    getQueue: function getQueue() {\n      return this._queue;\n    },\n    /**\r\n     * Получение dropzone\r\n     * @return {jQuery|null}\r\n     */\n    getDropzone: function getDropzone() {\n      return this._dropzone;\n    },\n    /**\r\n     * Подписка на событие\r\n     * @param {string}           eventName\r\n     * @param {function|string}  callback\r\n     * @param {object|undefined} context\r\n     */\n    on: function on(eventName, callback, context) {\n      if (_typeof(this._events[eventName]) !== 'object') {\n        this._events[eventName] = [];\n      }\n      this._events[eventName].push({\n        context: context || this,\n        callback: callback,\n        singleExec: false\n      });\n    },\n    /**\r\n     * Подписка на событие таким образом, что выполнение произойдет лишь один раз\r\n     * @param {string}           eventName\r\n     * @param {function|string}  callback\r\n     * @param {object|undefined} context\r\n     */\n    one: function one(eventName, callback, context) {\n      if (_typeof(this._events[eventName]) !== 'object') {\n        this._events[eventName] = [];\n      }\n      this._events[eventName].push({\n        context: context || this,\n        callback: callback,\n        singleExec: true\n      });\n    },\n    /**\r\n     * Получение настроек языка\r\n     */\n    getLang: function getLang() {\n      return $.extend(true, {}, this._options.langItems);\n    },\n    /**\r\n     * Получение всех файлов\r\n     * @return {object}\r\n     */\n    getFiles: function getFiles() {\n      return this._files;\n    },\n    /**\r\n     * Получение файла по его id\r\n     * @param {int} fileId\r\n     * @return {object|null}\r\n     */\n    getFileById: function getFileById(fileId) {\n      var result = null;\n      $.each(this._files, function (key, file) {\n        if (fileId === file.getId()) {\n          result = file;\n        }\n      });\n      return result;\n    },\n    /**\r\n     * Удаление всех файлов\r\n     */\n    removeAll: function removeAll() {\n      $.each(this._files, function (key, file) {\n        file.remove();\n      });\n    },\n    /**\r\n     * Загрузка всех файлов\r\n     */\n    uploadAll: function uploadAll() {\n      $.each(this._files, function (key, file) {\n        file.upload();\n      });\n    },\n    /**\r\n     * Отмена загрузки всех файлов\r\n     */\n    abortAll: function abortAll() {\n      $.each(this._files, function (key, file) {\n        file.abort();\n      });\n    }\n  };\n\n  var fileUp = {\n    lang: {},\n    _instances: {},\n    /**\r\n     * Создание экземпляра\r\n     * @param {object} options\r\n     * @returns {object}\r\n     */\n    create: function create(options) {\n      options = fileUpUtils.isObject(options) ? options : {};\n      if (!options.hasOwnProperty('lang')) {\n        options.lang = 'en';\n      }\n      var langList = this.lang.hasOwnProperty(options.lang) ? this.lang[options.lang] : {};\n      options.langItems = options.hasOwnProperty('langItems') && fileUpUtils.isObject(options.langItems) ? $.extend(true, {}, langList, options.langItems) : langList;\n      var instance = $.extend(true, {}, fileUpInstance);\n      instance._init(options);\n      var id = instance.getId();\n      this._instances[id] = instance;\n      return instance;\n    },\n    /**\r\n     * Получение экземпляра по id\r\n     * @param {string} id\r\n     * @returns {object|null}\r\n     */\n    get: function get(id) {\n      if (!this._instances.hasOwnProperty(id)) {\n        return null;\n      }\n      if (!$.contains(document, this._instances[id]._input[0])) {\n        delete this._instances[id];\n        return null;\n      }\n      return this._instances[id];\n    }\n  };\n\n  fileUp.lang.en = {\n    upload: 'Upload',\n    abort: 'Abort',\n    remove: 'Remove',\n    complete: 'Complete',\n    error: 'Error',\n    errorLoad: 'Error uploading file',\n    errorBadStatus: 'Error uploading file. Bad request.',\n    errorFilesLimit: 'The number of selected files exceeds the limit (%filesLimit%)',\n    errorSizeLimit: 'File \"%fileName%\" exceeds the size limit (%sizeLimit%)',\n    errorFileType: 'File \"%fileName%\" is incorrect',\n    errorOldBrowser: 'Your browser can not upload files. Update to the latest version'\n  };\n\n  fileUp.lang.ru = {\n    upload: 'Загрузить',\n    abort: 'Остановить',\n    remove: 'Удалить',\n    complete: 'Готово',\n    error: 'Ошибка',\n    errorLoad: 'Ошибка при загрузке файла',\n    errorBadStatus: 'Ошибка при загрузке файла. Некорректный запрос.',\n    errorFilesLimit: 'Количество выбранных файлов превышает лимит (%filesLimit%)',\n    errorSizeLimit: 'Файл \"%fileName%\" превышает предельный размер (%sizeLimit%)',\n    errorFileType: 'Файл \"%fileName%\" является некорректным',\n    errorOldBrowser: 'Обновите ваш браузер до последней версии'\n  };\n\n  fileUp.lang.es = {\n    upload: 'Subir',\n    abort: 'Cancelar',\n    remove: 'Eliminar',\n    complete: 'Cargado',\n    error: 'Error',\n    errorLoad: 'Error al cargar el archivo',\n    errorBadStatus: 'Error al cargar el archivo. Solicitud no válida.',\n    errorFilesLimit: 'El número de archivo selecccionados excede el límite (%filesLimit%)',\n    errorSizeLimit: 'El archivo \"%fileName%\" excede el limite de tamaño (%sizeLimit%)',\n    errorFileType: 'El archivo \"%fileName%\" es inválido',\n    errorOldBrowser: 'Tu navegador no puede subir archivos. Actualiza a la última versión'\n  };\n\n  fileUp.lang.pt = {\n    upload: 'Enviar',\n    abort: 'Cancelar',\n    remove: 'Remover',\n    complete: 'Enviado',\n    error: 'Erro',\n    errorLoad: 'Erro ao carregar o arquivo',\n    errorBadStatus: 'Erro ao carregar o arquivo. Pedido inválido.',\n    errorFilesLimit: 'O número de arquivos selecionados excede o limite (%filesLimit%)',\n    errorSizeLimit: 'Arquivo \"%fileName%\" excede o limite (%sizeLimit%)',\n    errorFileType: 'Arquivo \"%fileName%\" inválido',\n    errorOldBrowser: 'Seu navegador não pode enviar os arquivos. Atualize para a versão mais recente'\n  };\n\n  return fileUp;\n\n}));\n"],"names":["global","factory","exports","module","define","amd","globalThis","self","fileUp","this","_typeof","o","Symbol","iterator","constructor","prototype","fileUpUtils","isObject","value","Array","isArray","isNumeric","num","trim","isNaN","getFileSize","file","File","size","fileSize","getFileName","name","fileName","getSizeHuman","result","Number","toFixed","hashCode","crc32","Date","getTime","Math","random","toString","str","c","a","f","n","t","length","charCodeAt","fileUpFile","_options","id","type","status","urlPreview","urlDownload","_id","_status","_fileElement","_fileData","_fileUp","_xhr","_init","options","fileData","Error","$","extend","xhr","window","XMLHttpRequest","XDomainRequest","ActiveXObject","e","fileUpPrivate","trigger","getId","getName","getElement","getUrlPreview","getUrlDownload","getSize","getXhr","getFileData","getStatus","setStatus","showError","message","element","find","removeClass","addClass","text","showSuccess","remove","abort","fadeOut","fileId","_files","hasOwnProperty","upload","that","formData","getOptions","timeout","onloadstart","onprogress","ProgressEvent","onload","responseText","response","onloadend","onabort","ontimeout","onerror","event","open","httpMethod","url","setRequestHeader","undefined","FormData","append","fieldName","Object","keys","extraFields","each","send","render","tpl","isNoPreview","mimeTypes","iconDefault","showClose","icon","fileType","fileExt","$name","lang","getLang","replace","match","FileReader","reader","attr","target","readAsDataURL","split","pop","hide","mime","key","RegExp","test","ext","replaceWith","click","fileUpEvents","$file","show","lengthComputable","percent","ceil","loaded","total","css","complete","eventName","alert","errorFilesLimit","filesLimit","sizeLimit","errorSizeLimit","errorFileType","_message","errorBadStatus","errorLoad","errorOldBrowser","stopPropagation","preventDefault","dataTransfer","dropEffect","dropzone","getDropzone","initInput","input","HTMLElement","jQuery","_input","initQueue","queue","_queue","initDropzone","_dropzone","on","getInput","addEventListener","files","appendFiles","initEvents","setEvent","func","Function","onSelect","onRemove","onBeforeStart","onStart","onProgress","onAbort","onSuccess","onFinish","onError","onDragOver","onDragLeave","onDragEnd","onDragEnter","renderFiles","i","_fileIndex","appendFileByData","params","results","_events","callback","push","apply","context","singleExec","splice","_this","multiple","is","_ret","accept","isAccept","types","isContinue","removeAll","appendFile","val","fileInstance","data","getQueue","templateFile","autostart","create","fileUpInstance","langItems","archive","word","excel","video","audio","pdf","binary","one","getFiles","getFileById","uploadAll","abortAll","_instances","langList","instance","get","contains","document","en","error","ru","es","pt"],"mappings":"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"}